<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>⑨rz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="我不姓赵，我不嫖娼">
<meta property="og:type" content="website">
<meta property="og:title" content="⑨rz">
<meta property="og:url" content="https://vjudge1.github.io/index.html">
<meta property="og:site_name" content="⑨rz">
<meta property="og:description" content="我不姓赵，我不嫖娼">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="⑨rz">
<meta name="twitter:description" content="我不姓赵，我不嫖娼">
  
    
    <link rel="alternate" href="/feed.xml" title="⑨rz" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
    <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li class="active">
            <a href="/index.html">Home</a>
          </li>
        
          <li class="">
            <a href="/archives/">Archives</a>
          </li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

    
    
    <div class="jumbotron">
        <div class="container">
            <h1 class="post-title" id="post-title">
                <a href="/" title="Back to home">
                    换成 Hexo
                </a>
            </h1>
            <div class="article-meta">
                <div class="article-datetime">
    <span class="article-date">
        <time datetime="2017-05-12T16:00:00.000Z" itemprop="datePublished">2017-05-13</time>
    </span>
</div>

                
                
    <div class="article-category">
        <a class="article-category-link" href="/categories/其他/">其他</a>
    </div>


                
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li></ul>


            </div>
        </div>
    </div>


    <div class="container">
        <div class="row">
            <div class="col-sm-9 blog-main">
                
  
    <article id="post-change-to-hexo" class="article article-type-post" itemscope itemprop="blogPost">

  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/13/change-to-hexo/">换成 Hexo</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
    <span class="article-date">
        <time datetime="2017-05-12T16:00:00.000Z" itemprop="datePublished">2017-05-13</time>
    </span>
</div>

    
    
    <div class="article-category">
        <a class="article-category-link" href="/categories/其他/">其他</a>
    </div>


    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li></ul>


  </div>
  
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>看到某大佬把博客换成 Hexo 之后我也有换软件的冲动了。我还不太熟悉 Hexo，所以先只迁移文章，主题什么的以后再慢慢改吧。</p>
<p>之前用的是 Jekyll 系统，因为 GitHub 能够自动生成博客内容。后来呢，稍微熟悉了点，我就自己设计主题了；再后来呢，设计主题不够了，我又写了点 Ruby 插件，然后改用 Grunt 部署，一切看起来还好。</p>
<p>直到有一天我换系统，问题才真正出现：为了写一个博客，要装 Ruby 和 npm，还要搞一堆沉重的组件，“这不清真”啊。Hexo 与之相比就好多了，只是一堆 js，而且 js 写起来还熟悉。需要什么东西就去堆 js 好了。</p>
<p>因为“又不是不能用”，而且一直很懒，所以不知道博客什么时候能搞好……我觉得还是我自己设计的旧主题好看，但是大概要等N年才能迁移过来吧……orz</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="https://vjudge1.github.io/2017/05/13/change-to-hexo/" data-id="cj2pxein4002m1tcmyebbg89n" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="https://vjudge1.github.io/2017/05/13/change-to-hexo/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
    </footer>
  </div>
  
</article>



  
    <article id="post-move-to-archlinux" class="article article-type-post" itemscope itemprop="blogPost">

  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/08/move-to-archlinux/">换成Arch Linux系统的一些记录</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
    <span class="article-date">
        <time datetime="2016-11-07T16:00:00.000Z" itemprop="datePublished">2016-11-08</time>
    </span>
</div>

    
    
    <div class="article-category">
        <a class="article-category-link" href="/categories/备忘录/">备忘录</a>
    </div>


    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/npm/">npm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wine/">wine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/東方Project/">東方Project</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/系统维护/">系统维护</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/配置/">配置</a></li></ul>


  </div>
  
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>又写很水的内容了——突然想把系统换成Arch Linux（64位，GNOME 3桌面），所以记录一下一些配置的要点。当然，具体的安装过程就不写了，网上教程很多，搜一下就能找到。</p>
<h1 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h1><h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p>稍有常识的人都能看出，如果我们的电脑不挂代理，那些特别的软件难道还能设置得了嘛？</p>
<p>我推荐使用<a href="https://github.com/renzhn/MEOW" target="_blank" rel="external">MEOW</a>，它可以把各种常见的代理转化为HTTP代理，而且是白名单制（只有白名单的网站不走代理），非常方便。</p>
<p>想自动启动的话，建立一个文件<code>~/.config/autostart/meow.desktop</code>，在其中输入</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[Desktop Entry]</span></div><div class="line"><span class="attr">Type</span>=Application</div><div class="line"><span class="attr">Name</span>=meow</div><div class="line"><span class="attr">Exec</span>=/home/xxx/MEOW</div></pre></td></tr></table></figure>
<p>当然也可以做成systemd服务（user）。</p>
<p>为了在命令行中享受到代理，可以在自己的shell的配置文件中加入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">export</span> HTTP_PROXY=http://127.0.0.1:7777</div><div class="line"><span class="built_in">export</span> HTTPS_PROXY=http://127.0.0.1:7777</div></pre></td></tr></table></figure>
<p>当然，跑pacman和滚Arch的时候没必要走代理，所以可以把镜像站的网址放到白名单里。</p>
<h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p>npm不用代理，直接换<a href="https://npm.taobao.org/" target="_blank" rel="external">淘宝镜像</a>：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">npm config set registry https://registry.npm.taobao.org</div><div class="line">npm config set disturl https://npm.taobao.org/dist</div><div class="line"></div><div class="line">npm set registry https://registry.npm.taobao.org</div><div class="line">npm set disturl https://npm.taobao.org/dist</div><div class="line">npm set chromedriver_cdnurl http://cdn.npm.taobao.org/dist/chromedriver</div><div class="line">npm set operadriver_cdnurl http://cdn.npm.taobao.org/dist/operadriver</div><div class="line">npm set phantomjs_cdnurl http://cdn.npm.taobao.org/dist/phantomjs</div><div class="line">npm set fse_binary_host_mirror https://npm.taobao.org/mirrors/fsevents</div><div class="line">npm set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass</div><div class="line">npm set electron_mirror http://cdn.npm.taobao.org/dist/electron/</div></pre></td></tr></table></figure>
<h3 id="gem"><a href="#gem" class="headerlink" title="gem"></a>gem</h3><p>换用<a href="https://gems.ruby-china.org" target="_blank" rel="external">Ruby China的镜像</a>：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/</div><div class="line">bundle config mirror.https://rubygems.org https://gems.ruby-china.org</div></pre></td></tr></table></figure>
<h2 id="AUR"><a href="#AUR" class="headerlink" title="AUR"></a>AUR</h2><p>为了能够多装些东西，我安装了yaourt。具体操作网上有，可以用archlinuxcn源。</p>
<p>配置好之后就可以yaourt地安装软件了。</p>
<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p>在决定手动安装字体之前，可以先到<a href="https://wiki.archlinux.org/index.php/Fonts" target="_blank" rel="external">ArchWiki的“字体”页面</a>上转转——很多字体可以通过pacman和yaourt来搞定。</p>
<p>我推荐三个编程字体：一个是Monaco（Mac系统的字体），一个是Source Code Pro，还有一个是Windows系统的Consolas。</p>
<p>对于中文字体，不想用文泉驿的话，我再推荐一个Google制作的Noto Sans CJK字体。不过最后我还是用微软雅黑了。</p>
<h2 id="输入法"><a href="#输入法" class="headerlink" title="输入法"></a>输入法</h2><p>为了配合Sublime Text等软件，我把输入法平台换成了fcitx。另外我一直使用中州韵输入法（放弃了搜狗），所以：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo pacman -S fcitx fcitx-im fcitx-rime</div></pre></td></tr></table></figure>
<p>在<code>~/.xprofile</code>（文件名全小写，如果没有该文件那么就新建一个）中输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</div><div class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</div><div class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=fcitx"</span></div></pre></td></tr></table></figure>
<p>接下来需要禁用iBus。在终端中输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">gsettings set org.gnome.settings-daemon.plugins.keyboard active false</div></pre></td></tr></table></figure>
<p>然后到“系统设置”-&gt;“地区和语言”把所有输入法删掉，这样iBus就不会干扰fcitx了。</p>
<p>fcitx的界面和GNOME的界面看起来不协调，可以通过<code>sudo pacman -S gnome-tweak-tool</code>安装“GNOME优化工具”，再借助它安装一个名为“Input method panel”的扩展程序来调整。</p>
<p>中州韵输入法的配置都在<code>~/.config/fcitx/rime</code>中，自己改改就能用了。为了不跟中州韵冲突，fcitx本身的切换输入法键（Shift）和全半角切换键得关掉。</p>
<h2 id="清理孤立软件包"><a href="#清理孤立软件包" class="headerlink" title="清理孤立软件包"></a>清理孤立软件包</h2><p>滚时间长了，体验然后卸载的软件多了，肯定会产生一些无用的软件包。输入以下命令清理：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo pacman -Rns $(pacman -Qtdq)</div></pre></td></tr></table></figure>
<p>另外可以通过<code>sudo pacman -Scc</code>来清理缓存。</p>
<h2 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h2><p>我用的 GTK 主题叫 Arc-Flatabulous，图标主题是 Numix 和 Papirus，Shell 主题是 Dark Mode，这些主题用 yaourt 搜一下就有了。</p>
<p>一些扩展：Alternatetab、Applications Menu、Dash to dock、Input method panel、Media player indicator、Screenshot locations、Services systemd、Topicons plus、User themes</p>
<h2 id="终端模拟器"><a href="#终端模拟器" class="headerlink" title="终端模拟器"></a>终端模拟器</h2><p>我现在用的是 Tilix，可以通过 yaourt 安装。另外发现一个叫做 <a href="http://hyper.is/" target="_blank" rel="external">Hyper</a> 的终端模拟器，它可以像 Atom 编辑器那样 Hack，不过我还没开始研究（已知中文会出问题）。</p>
<h1 id="编程软件"><a href="#编程软件" class="headerlink" title="编程软件"></a>编程软件</h1><h2 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h2><p><a href="https://github.com/vjudge1/misc/blob/master/config/vimrc" target="_blank" rel="external">我的Vim配置文件</a>是过去写好的，所以直接搬来用了。</p>
<p>大致的情况就是使用Vundle作为插件管理器，然后塞了一大堆插件。其中最难配置的就是<a href="https://github.com/Valloric/YouCompleteMe" target="_blank" rel="external">YouCompleteMe</a>，不过在Linux中的配置可比在Windows和Mac系统中轻松多了。</p>
<p>终端版无法正确处理剪贴板，因此也可以<code>yaourt -S vim-clipboard</code>。</p>
<h2 id="Sublime-Text"><a href="#Sublime-Text" class="headerlink" title="Sublime Text"></a>Sublime Text</h2><p>不要<code>yaourt -S sublime-text-dev</code>，那个版本没法敲汉字。我们应当<code>yaourt -S sublime-text-dev-imfix</code>。</p>
<p>如果PATH变量是在<code>.zshrc</code>中设置的，那么Sublime Text可能会注意不到（废话）。对于某些插件来说，你需要修复一下这个问题，或者手动给它们指定PATH。这个症状在Mac中也会出现。</p>
<p>提示“软件包冲突”的话，那么你可以改一下PKGBUILD，去掉zh_CN和zh_TW中的一个——去掉zh_TW的话就是大陆版的“九二共识”，去掉zh_CN的话就是大陆版的“台独”。</p>
<h2 id="Atom"><a href="#Atom" class="headerlink" title="Atom"></a>Atom</h2><p>Sublime Text的输入法问题实在令人头疼，即使把iBus换成fcitx有时候还是不好使。另外Atom本身也是个很棒的编辑器，所以自然要跟Sublime Text换着用。</p>
<p>因为Atom很火，直接通过pacman安装就行了：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo pacman -S atom apm</div></pre></td></tr></table></figure>
<p>在调用apm的时候，你需要挂代理，否则apm就直接废了。具体做法就是</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">apm config proxy http://127.0.0.1:7777</div><div class="line">apm config https-proxy http://127.0.0.1:7777</div><div class="line">apm config set strict-ssl false</div></pre></td></tr></table></figure>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>Arch默认的Python是3.x，而且没有提供一种切换Python版本的工具。为了使2.x成为默认Python，按照官方给出的方法，我是这样做的：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mkdir ~/.bin</div><div class="line">ln -s /usr/bin/python2 ~/.bin/python</div><div class="line">ln -s /usr/bin/pip2 ~/.bin/pip</div><div class="line">ln -s /usr/bin/python2-config ~/.bin/python-config</div></pre></td></tr></table></figure>
<p>最后在PATH中保证<code>/home/xxx/.bin</code>排在<code>/usr/bin</code>前面即可。</p>
<h2 id="关于本博客（Jekyll-版）"><a href="#关于本博客（Jekyll-版）" class="headerlink" title="关于本博客（Jekyll 版）"></a>关于本博客（Jekyll 版）</h2><p>敲<code>grunt serve</code>的时候突然冒出满屏幕的“Warning: watch … ENOSPC”警告，根本无法预览，所以搜到了<a href="http://stackoverflow.com/questions/16748737/grunt-watch-error-waiting-fatal-error-watch-enospc" target="_blank" rel="external">StackOverflow的解决方案</a>。他们的系统敲的是：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</div></pre></td></tr></table></figure>
<p>那是Ubuntu系统。我们Arch系统要敲</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.d/99-sysctl.conf &amp;&amp; sudo sysctl --system</div></pre></td></tr></table></figure>
<p>后来换成 Hexo 就没有这个问题了。</p>
<h1 id="日常软件"><a href="#日常软件" class="headerlink" title="日常软件"></a>日常软件</h1><h2 id="Google-Chrome"><a href="#Google-Chrome" class="headerlink" title="Google Chrome"></a>Google Chrome</h2><p>就一行命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">yaourt -S google-chrome</div></pre></td></tr></table></figure>
<h2 id="QQ"><a href="#QQ" class="headerlink" title="QQ"></a>QQ</h2><p>我去年写过一个<a href="/2015/08/21/wineqq/">在Linux上面跑QQ的文章</a>，现在那个WineQQ还在，而且仍然好使，照做即可。</p>
<p>当然，有 AUR 那篇文章就“白写”了。</p>
<h2 id="Office"><a href="#Office" class="headerlink" title="Office"></a>Office</h2><p>对我来说 LibreOffice 足够用了。我还有个 Windows 平板所以不担心兼容性的问题。</p>
<h1 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a>游戏</h1><h2 id="东方Project"><a href="#东方Project" class="headerlink" title="东方Project"></a>东方Project</h2><p>在Arch里玩东方Project只需这样做：开启multilib支持（64位系统才需要），在<code>/etc/pacman.conf</code>里加一句</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="section">[multilib]</span></div><div class="line"><span class="attr">Include</span> = /etc/pacman.d/mirrorlist</div></pre></td></tr></table></figure>
<p>然后装wine和解码器（32位系统直接去掉命令中的“lib32”）：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo pacman -S wine</div><div class="line">sudo pacman -S lib32-alsa-lib lib32-pulse-lib lib32-libpulse lib32-alsa-plugins lib32-mpg123 lib32-sdl lib32-openal lib32-gst-plugins-base lib32-gstreamer gst-libav lib32-gst-plugins-good</div></pre></td></tr></table></figure>
<p>然后就OK了。</p>
<p>注意：</p>
<ol>
<li>如果游戏乱码，请设置LC_ALL变量，例如：<code>LC_ALL=zh_CN.UTF-8 wine th06.exe</code>。Mac系统也是这样处理的。不要听网上说改LANG，没用的。</li>
<li>想全屏游戏的话，桌面不要用Wayland，而是应当换回Xorg，否则不仅进不去而且还会崩终端或桌面。</li>
<li>不知道什么原因，新版wine跑辉针城或以上游戏的时候游戏速度会非常快……</li>
</ol>
<h2 id="Steam"><a href="#Steam" class="headerlink" title="Steam"></a>Steam</h2><p>只需要：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">yaourt -S steam steam-native-runtime</div></pre></td></tr></table></figure>
<p>不过Steam没法通过optirun来启动。所以我暂时想到的方法是：把Steam放在那里挂着，然后自己手动通过optirun来运行游戏：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">optirun ~/.steam/steam/steamapps/common/Portal\ 2/portal2.sh -game portal2 -steam</div></pre></td></tr></table></figure>
<p>不幸的是，对于《半条命2》、《传送门》等起源引擎游戏，中文可能连豆腐块都看不到——直接是“无字天书”。这是因为游戏引擎把字体名称写死了，测量中文字符时直接宽度为零，所以我们要做个字体替换，把写死的“Nimbus Sans”字体换成文泉驿：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line">&lt;?xml version="1.0"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">fontconfig</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">"pattern"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">"any"</span> <span class="attr">name</span>=<span class="string">"family"</span>&gt;</span><span class="tag">&lt;<span class="name">string</span>&gt;</span>Nimbus Sans<span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;/<span class="name">test</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">"family"</span> <span class="attr">mode</span>=<span class="string">"assign"</span> <span class="attr">binding</span>=<span class="string">"same"</span>&gt;</span><span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Zen Hei<span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;/<span class="name">edit</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">fontconfig</span>&gt;</span></div></pre></td></tr></table></figure>
<p>保存到<code>~/.config/fontconfig/fonts.conf</code>，这样就能显示汉字了。</p>
<h2 id="MIDI"><a href="#MIDI" class="headerlink" title="MIDI"></a>MIDI</h2><p>如果需要 MIDI，可以这样配置：</p>
<ol>
<li>安装 FluidSynth</li>
<li>安装一个 SoundFont，例如 Windows 系统的 SoundFont 文件叫做 2gmgsmt.sf2。</li>
<li>按<a href="https://wiki.archlinux.org/index.php/FluidSynth" target="_blank" rel="external">Archlinux Wiki上面的内容</a>修改<code>/etc/conf.d/fluidsynth</code>，把 SoundFont 文件设置好，并将 FluidSynth 配置成 systemd 服务，启动。</li>
<li>如果 Wine 程序需要 MIDI，那么还要改一下注册表：<code>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\MIDIMap</code>（没有就新建一个），新建一个字符串值，名称为<code>CurrentInstrument</code>，并设为“#1”。</li>
</ol>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="https://vjudge1.github.io/2016/11/08/move-to-archlinux/" data-id="cj2pxein1002j1tcm6413h3su" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="https://vjudge1.github.io/2016/11/08/move-to-archlinux/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
    </footer>
  </div>
  
</article>



  
    <article id="post-macports" class="article article-type-post" itemscope itemprop="blogPost">

  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/08/macports/">MacPorts的安装与使用</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
    <span class="article-date">
        <time datetime="2016-10-07T16:00:00.000Z" itemprop="datePublished">2016-10-08</time>
    </span>
</div>

    
    
    <div class="article-category">
        <a class="article-category-link" href="/categories/教程/">教程</a>
    </div>


    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mac/">Mac</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MacPorts/">MacPorts</a></li></ul>


  </div>
  
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Mac下常用的软件包管理器有MacPorts和Homebrew等。我用的是MacPorts。用上它们之后，就有一种在用Linux的感觉……</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>首先需要到App Store安装Xcode。安装完成后，还要安装Command Line Tools。第一次进入Xcode之后应该有提示。如果没有，也可以<code>xcode-select --install</code>。安装完成后可以试一下<code>gcc</code>能不能执行。</p>
<p>MacPorts的安装很简单，到<a href="https://www.macports.org/install.php" target="_blank" rel="external">官方网站</a>上面下载并安装即可。</p>
<p>安装完成后，默认情况下，通过MacPorts安装的软件会被塞到<code>/opt/local</code>之中。</p>
<p>如果想把镜像站设置为USTC的，那么需要做以下两步：</p>
<p>编辑<code>/opt/local/etc/macports/sources.conf</code>，将其中的地址换成</p>
<pre><code>rsync://mirrors.ustc.edu.cn/macports/ports [default]
</code></pre><p>然后再打开<code>/opt/local/etc/macports/macports.conf</code>，加入</p>
<pre><code>rsync_server    mirrors.ustc.edu.cn
rsync_dir       macports/base/
</code></pre><p>然后执行<code>sudo port -v selfupdate</code>即可更新索引。但是USTC的镜像仅限于索引，软件包还会从墙外网站下载。嫌慢的话代理还是必不可少的。</p>
<h1 id="安装、卸载与清理软件包"><a href="#安装、卸载与清理软件包" class="headerlink" title="安装、卸载与清理软件包"></a>安装、卸载与清理软件包</h1><p>安装软件包之前建议先<code>sudo port -v selfupdate</code>更新索引。</p>
<ol>
<li>安装软件包：<code>sudo port install 软件包</code></li>
<li>搜索软件包：<code>port search 关键词</code></li>
<li>卸载软件包：<code>sudo port unistall 软件包</code></li>
<li>查看可以升级的软件包：<code>port outdated</code></li>
<li>升级某个软件包：<code>sudo port upgrade 软件包</code></li>
<li>升级所有软件包：<code>sudo port upgrade outdated</code></li>
<li>查看某个软件包的详细信息：<code>port info 软件包</code></li>
</ol>
<p>如果在安装过程中按了<kbd>Control+C</kbd>，可以先通过<code>sudo port clean --all 软件包</code>进行清理，然后再重新安装。</p>
<p>在升级之后，旧软件包并不会被删除。可以用<code>sudo port uninstall outdated</code>命令清理。</p>
<p>在删除某一软件包之后，有些软件包可能不再被使用（例如安装某软件包时附带的一堆依赖），可以通过<code>sudo port uninstall leaves</code>全部清理掉。垃圾太多的话，那么可能需要执行多次这个命令才能清理干净。如果不希望某个软件包被清理掉，可以先输入<code>port echo leaves</code>可以查看这些软件包名称，接下来输入<code>sudo port setrequested 软件包</code>，然后再进行清理。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><h2 id="切换默认版本"><a href="#切换默认版本" class="headerlink" title="切换默认版本"></a>切换默认版本</h2><p>以Python为例，</p>
<ol>
<li>查看已有版本：<code>port select --list python</code></li>
<li>将默认版本设置为3.x：<code>sudo port select --set python python35</code></li>
</ol>
<h2 id="修复PATH环境变量"><a href="#修复PATH环境变量" class="headerlink" title="修复PATH环境变量"></a>修复PATH环境变量</h2><p>MacPorts安装程序会自动在shell的配置文件中把<code>/opt/local/bin:/opt/local/sbin</code>补上。但是，在Mac系统中，不通过命令行执行的程序（例如在Dock上面点的，或者从LaunchPad上面选的），他们并不会找shell的配置文件——这些程序仍然会以为PATH是<code>/usr/bin:/bin:/usr/sbin:/sbin</code>，所以需要在终端中执行（10.10或以上系统）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">sudo launchctl config user path <span class="variable">$PATH</span></div></pre></td></tr></table></figure>
<p>重启之后生效。这样的话，即使不在命令行打开程序，PATH同样有效。另外，该命令会对系统内的所有用户起作用。</p>
<h2 id="MacPorts的Python与系统的Python"><a href="#MacPorts的Python与系统的Python" class="headerlink" title="MacPorts的Python与系统的Python"></a>MacPorts的Python与系统的Python</h2><p>系统自带Python，其实这是一件很恶心的事情——没法升级，还会对Ports带的Python造成负面影响：在我电脑上，使用系统Python的话，Vim插件（YouCompleteMe）和Powerline都会崩溃，因此需要把系统Python屏蔽掉。</p>
<p>除了在PATH中把<code>/opt/local/bin</code>放到<code>/usr/bin</code>前面，你还需要——</p>
<h3 id="“简单粗暴”"><a href="#“简单粗暴”" class="headerlink" title="“简单粗暴”"></a>“简单粗暴”</h3><p>有一个简单粗暴的办法，把<code>/usr/bin/python</code>改成到<code>/opt/local/bin/python</code>的软链接，然后把<code>/System/Library/Frameworks/Python.framework/Versions/2.7</code>改为到<code>/opt/local/Library/Frameworks/Python.framework/Versions/2.7</code>的软链接，完整命令如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">cd</span> /usr/bin</div><div class="line">sudo mv python python_backup</div><div class="line">sudo ln <span class="_">-s</span> /opt/<span class="built_in">local</span>/bin/python python</div><div class="line"><span class="built_in">cd</span> /System/Library/Frameworks/Python.framework/Versions</div><div class="line">sudo mv 2.7 2.7_backup</div><div class="line">sudo ln <span class="_">-s</span> /opt/<span class="built_in">local</span>/Library/Frameworks/Python.framework/Versions/2.7 2.7</div></pre></td></tr></table></figure>
<p>但是，对于白苹果（10.11或更高版本）来说，因为SIP（System Integrity Protection）的存在，这种暴力并不能被直接施加，所以还得先进入Recovery模式（开机时按<kbd>Command+R</kbd>），在终端中输入<code>csrutil disable</code>，关掉SIP功能。</p>
<h3 id="“特事特办”"><a href="#“特事特办”" class="headerlink" title="“特事特办”"></a>“特事特办”</h3><p>如果不想诉诸暴力，那么也可以“特事特办”——</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">install_name_tool -change /System/Library/Frameworks/Python.framework/Versions/2.7/Python /opt/<span class="built_in">local</span>/Library/Frameworks/Python.framework/Versions/2.7/Python /Applications/MacVim.app/Contents/MacOS/Vim</div></pre></td></tr></table></figure>
<h2 id="系统升级"><a href="#系统升级" class="headerlink" title="系统升级"></a>系统升级</h2><p>系统升级（例如10.11→10.12）之后，需要执行以下步骤：</p>
<ol>
<li>重新安装Xcode的Command Line Tools。如果Xcode未发生变化，那么就进入Xcode，这时应该会出现提示。如果没有任何提示，也可以到终端里面敲<code>xcode-select --install</code>来重新安装。</li>
<li>重新到官网上下载MacPorts安装包，重新安装。</li>
<li>通过<code>sudo port selfupdate &amp;&amp; sudo port upgrade outdated</code>重新安装软件包。（不像官网说得那样麻烦）</li>
</ol>
<h2 id="卸载MacPorts"><a href="#卸载MacPorts" class="headerlink" title="卸载MacPorts"></a>卸载MacPorts</h2><p>如果想抛弃MacPorts，投入Homebrew的怀抱，或者从此告别软件包管理器，可以按照以下方法卸载：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">sudo port -fp uninstall installed</div><div class="line">sudo rm -rf /opt/<span class="built_in">local</span> /Applications/MacPorts ~/.macports</div></pre></td></tr></table></figure>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="https://vjudge1.github.io/2016/10/08/macports/" data-id="cj2pxeimz002g1tcmeg5k9n33" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="https://vjudge1.github.io/2016/10/08/macports/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
    </footer>
  </div>
  
</article>



  
    <article id="post-programming-in-wikipedia" class="article article-type-post" itemscope itemprop="blogPost">

  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/07/programming-in-wikipedia/">维基百科编程笔记</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
    <span class="article-date">
        <time datetime="2016-10-06T16:00:00.000Z" itemprop="datePublished">2016-10-07</time>
    </span>
</div>

    
    
    <div class="article-category">
        <a class="article-category-link" href="/categories/教程/">教程</a>
    </div>


    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API/">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/维基百科/">维基百科</a></li></ul>


  </div>
  
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>最近维基百科严重上瘾，除了写条目和<a href="https://zh.wikipedia.org/wiki/Wikipedia:%E7%A0%B4%E5%9D%8F" target="_blank" rel="external">搞破坏</a>，还写了一点脚本。像我这种<a href="https://wiki.esu.moe/曹国祥" target="_blank" rel="external">电脑高级中手</a>，有了心得之后，在自己博客上随便写点什么算了，不往百科用户页里面写了。维基百科内有很详细的文档，而且高手非常多，不会的话可以问他们。</p>
<div class="bs-callout bs-callout-info">
                <h4 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h4><p>2016年11月21日：把“机器人”一节补完。</p>

            </div>
<p>维基百科基于MediaWiki系统，这个系统提供了很多API，所以对维基百科编程（例如写点小工具等）其实很容易。当然，不要拿去搞破坏，否则会被一群认真狂魔给封禁。</p>
<p>为了体验编程的乐趣，必须要注册账号。注册满七天和50次编辑即可变为自动确认用户。如果想刷编辑次数的话，记住，做正经编辑，或者至少不要在正经场合捣乱和冲刷“最近编辑”，否则也会被封禁。</p>
<p>下面假设自己的用户名叫做Example。</p>
<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><p>首先，自己的JavaScript脚本必须放在<code>User:Example/</code>下面。如果想每次打开一个页面都自动执行的话，请把代码放到<code>User:Example/common.js</code>中——在维基百科不需要<a href="https://zh.wikipedia.org/zh/Greasemonkey" target="_blank" rel="external">油猴</a>插件。</p>
<h2 id="引用其他脚本"><a href="#引用其他脚本" class="headerlink" title="引用其他脚本"></a>引用其他脚本</h2><p>新接触JS的维基用户往往是为了导入一些实用的小工具。可以用以下两种代码来加载代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 加载某个URL的脚本。注意像GitHub的Raw那样强行要求text/plain的网址是无效的。</span></div><div class="line">mw.loader.load(<span class="string">'https://wikiplus-app.smartgslb.com/Main.js'</span>);</div><div class="line"><span class="comment">// 加载某个用户（包括自己）的脚本</span></div><div class="line"><span class="comment">// 虽然有 importScript 函数，但那个是中文维基自己搞的。</span></div><div class="line">mw.loader.load(<span class="string">'https://zh.wikipedia.org/w/index.php?title=User:逆襲的天邪鬼/js/link-ts.js&amp;action=raw&amp;ctype=text/javascript'</span>);</div><div class="line"><span class="comment">// 加载某个 CSS</span></div><div class="line">mw.loader.load(<span class="string">'https://zh.wikipedia.org/w/index.php?title=User:逆襲的天邪鬼/common.css&amp;action=raw&amp;ctype=text/css'</span>, <span class="string">'text/css'</span>);</div></pre></td></tr></table></figure>
<p>mw.loader.load 不会监控脚本加载状态。如果需要监控脚本加载情况，可以用 $.getScript()。</p>
<h2 id="开始编程"><a href="#开始编程" class="headerlink" title="开始编程"></a>开始编程</h2><p>只要会JavaScript，只要不对别人产生不良影响，怎么写都行。</p>
<p>因为调试脚本是件很麻烦的事情，建议在自己的浏览器上安装油猴（Greasemonkey/Tampermonkey）插件。写得差不多再提交到维基百科中。当然如果想刷编辑次数的话就当我什么都没说。</p>
<p>这样做的话，脚本的加载时机是不同的。正常情况下，用户脚本（common.js）是在皮肤脚本加载完成后加载的，这时网页内容已经差不多加载完了。使用油猴的话会早一些。</p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p>目前维基百科自带jQuery，版本1.11.3，拿去用就行了。维基百科还提供了jQuery UI等组件，可以通过类似<code>mw.loader.using(&#39;jquery.ui.dialog&#39;);</code>的代码来加载。mw.loader.using 函数返回一个 Promise。</p>
<p>MediaWiki提供了很多API，用于获取信息、更改内容等。所有JavaScript API都在<code>mw</code>之中，而API都通过<code>https://zh.wikipedia.org/w/api.php</code>调用，详细内容可以见<a href="https://doc.wikimedia.org/mediawiki-core/master/js/#!/api/mw-property-config" target="_blank" rel="external">JS参考手册</a>和<a href="https://www.mediawiki.org/wiki/API:Main_page/zh" target="_blank" rel="external">API参考</a>。</p>
<p>另外，维基百科也提供了 RESTful 的 API，详见<a href="https://zh.wikipedia.org/api/rest_v1/" target="_blank" rel="external">文档</a>。</p>
<p>举一些例子：</p>
<h3 id="获取当前页面完整名称"><a href="#获取当前页面完整名称" class="headerlink" title="获取当前页面完整名称"></a>获取当前页面完整名称</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> name = mw.config.get(<span class="string">'wgPageName'</span>);</div></pre></td></tr></table></figure>
<h3 id="在“查看历史”右面添加一个菜单"><a href="#在“查看历史”右面添加一个菜单" class="headerlink" title="在“查看历史”右面添加一个菜单"></a>在“查看历史”右面添加一个菜单</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> node = mw.util.addPortletLink(<span class="string">'p-cactions'</span>, <span class="string">'#'</span>, <span class="string">'Hello'</span>);</div><div class="line">$(node).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    e.preventDefault();</div><div class="line">    alert(<span class="string">'Hello world!'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="获取某页面内容（客户端）"><a href="#获取某页面内容（客户端）" class="headerlink" title="获取某页面内容（客户端）"></a>获取某页面内容（客户端）</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params">pageName</span>) </span>&#123;</div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">url</span>: mw.util.wikiScript(<span class="string">'api'</span>),</div><div class="line">        <span class="attr">data</span>: &#123;</div><div class="line">            <span class="attr">action</span>: <span class="string">'query'</span>,</div><div class="line">            <span class="attr">prop</span>: <span class="string">'revisions'</span>,</div><div class="line">            <span class="attr">rvprop</span>: <span class="string">'content'</span>,</div><div class="line">            <span class="attr">titles</span>: pageName,       <span class="comment">// 多个页面用“|”分隔</span></div><div class="line">            redirects: <span class="literal">true</span>,        <span class="comment">// 解析重定向</span></div><div class="line">            format: <span class="string">'json'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">dataType</span>: <span class="string">'json'</span>,</div><div class="line">        <span class="attr">type</span>: <span class="string">'POST'</span>,</div><div class="line">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (data.query) &#123;</div><div class="line">                <span class="keyword">var</span> pages = data.query.pages;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> pageid <span class="keyword">in</span> pages) &#123;</div><div class="line">                    <span class="keyword">var</span> page = pages[pageid];</div><div class="line">                    <span class="keyword">if</span> (<span class="string">'missing'</span> <span class="keyword">in</span> page) &#123;</div><div class="line">                        alert(<span class="string">'页面'</span> + page.title + <span class="string">'不存在'</span>);</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        alert(<span class="string">'页面'</span> + page.title + <span class="string">'的内容是：\n'</span> + page.revisions[<span class="number">0</span>][<span class="string">'*'</span>]);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> xhr </span>) </span>&#123;</div><div class="line">            alert(<span class="string">'请求失败'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>query功能其实非常多，这里只列出了一个最简单的……</p>
<h3 id="改写某页面内容（客户端）"><a href="#改写某页面内容（客户端）" class="headerlink" title="改写某页面内容（客户端）"></a>改写某页面内容（客户端）</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">edit</span>(<span class="params">pageName, text, summary</span>) </span>&#123;</div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">url</span>: mw.util.wikiScript(<span class="string">'api'</span>),</div><div class="line">        <span class="attr">data</span>: &#123;</div><div class="line">            <span class="attr">format</span>: <span class="string">'json'</span>,</div><div class="line">            <span class="attr">action</span>: <span class="string">'edit'</span>,</div><div class="line">            <span class="attr">title</span>: pageName,</div><div class="line">            <span class="attr">summary</span>: summary,</div><div class="line">            <span class="attr">text</span>: text,</div><div class="line">            <span class="attr">token</span>: mw.user.tokens.get(<span class="string">'editToken'</span>)</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">dataType</span>: <span class="string">'json'</span>,</div><div class="line">        <span class="attr">type</span>: <span class="string">'POST'</span>,</div><div class="line">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (data &amp;&amp; data.edit &amp;&amp; data.edit.result === <span class="string">'Success'</span>) &#123;</div><div class="line">                alert(<span class="string">'成功'</span>);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &amp;&amp; data.edit &amp;&amp; data.edit.result === <span class="string">'Failure'</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (data.edit.captcha) &#123;</div><div class="line">                    alert(<span class="string">'需要验证码，id='</span> + data.edit.captcha.id + <span class="string">'，url='</span> + data.edit.captcha.url);</div><div class="line">                    <span class="comment">// 这时需要人工识别验证码，在下次提交时需要加入captchaword（验证码内容）和captchaid（上面的id）两个参数。</span></div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.edit.code === <span class="string">'abusefilter-warning'</span>) &#123;</div><div class="line">                    alert(<span class="string">'被防滥用过滤器警告'</span>);</div><div class="line">                    <span class="comment">// 如果确定自己的编辑没有问题，再提交一次即可。</span></div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.edit.code === <span class="string">'abusefilter-disallowed'</span>) &#123;</div><div class="line">                    alert(<span class="string">'被防滥用过滤器阻止'</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.edit.spamblacklist) &#123;</div><div class="line">                    alert(<span class="string">'被垃圾过滤器阻止'</span>);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    alert(<span class="string">'未知错误'</span>);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data &amp;&amp; data.error) &#123;</div><div class="line">                <span class="keyword">if</span> (data.error.code === <span class="string">'protectedpage'</span>) &#123;</div><div class="line">                    alert(<span class="string">'页面被保护'</span>);</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.error.code === <span class="string">'blocked'</span>) &#123;</div><div class="line">                    alert(<span class="string">'你已被封禁'</span>);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    alert(<span class="string">'错误'</span> + data.error.code + <span class="string">'：'</span> + data.error.info);</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                alert(<span class="string">'未知错误'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> xhr </span>) </span>&#123;</div><div class="line">            alert(<span class="string">'请求失败'</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>关于详细参数、错误码等信息，可见<a href="https://www.mediawiki.org/wiki/API:Edit" target="_blank" rel="external">API:Edit</a>。</p>
<p>注意，这段代码不会自动追踪重定向页——如果标题是个重定向页，那么重定向页本身会被改写。</p>
<p>如果这段代码不正确地用在了正经场合（例如条目或计划页），你就等着被管理员收拾吧……</p>
<div style="display: none;"><br>如果页面被保护，那么data.error.code会返回“protectedpage”。<br><br>如果是新用户触发了验证码（所以建议先把自己刷到自动确认用户，免得麻烦），那么会返回：<br><br><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;<span class="attr">"edit"</span>:&#123;<span class="attr">"captcha"</span>:&#123;<span class="attr">"type"</span>:<span class="string">"image"</span>,<span class="attr">"mime"</span>:<span class="string">"image/png"</span>,<span class="attr">"id"</span>:<span class="string">"1027249016"</span>,<span class="attr">"url"</span>:<span class="string">"/w/index.php?title=Special:%E9%AA%8C%E8%AF%81%E7%A0%81/image&amp;wpCaptchaId=1027249016"</span>&#125;,<span class="attr">"result"</span>:<span class="string">"Failure"</span>&#125;&#125;</div></pre></td></tr></table></figure><br><br>这时需要人工识别验证码，在下次提交时加入captchaword（验证码内容）和captchaid（上面的id）两个参数。<br><br>如果因触发防滥用过滤器而被警告，那么编辑会失败，然后data会返回和下面类似的字符串：<br><br><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;<span class="attr">"edit"</span>:&#123;<span class="attr">"code"</span>:<span class="string">"abusefilter-warning"</span>,<span class="attr">"message"</span>:&#123;<span class="attr">"key"</span>:<span class="string">"abusefilter-warning"</span>,<span class="attr">"params"</span>:[<span class="string">"编辑其他用户的用户页"</span>,<span class="number">27</span>]&#125;,<span class="attr">"abusefilter"</span>:&#123;<span class="attr">"id"</span>:<span class="number">27</span>,<span class="attr">"description"</span>:<span class="string">"编辑其他用户的用户页"</span>,<span class="attr">"actions"</span>:[<span class="string">"warn"</span>]&#125;,<span class="attr">"info"</span>:<span class="string">"Hit AbuseFilter: 编辑其他用户的用户页"</span>,<span class="attr">"warning"</span>:<span class="string">"&lt;b&gt;警告：&lt;/b&gt;此操作已被自动识别为有害……"</span>,<span class="attr">"result"</span>:<span class="string">"Failure"</span>&#125;&#125;</div></pre></td></tr></table></figure><br><br>重新提交一次即可。<br><br>如果被防滥用过滤器阻止，那么data会返回：<br><br><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;<span class="attr">"edit"</span>:&#123;<span class="attr">"code"</span>:<span class="string">"abusefilter-disallowed"</span>,<span class="attr">"message"</span>:&#123;<span class="attr">"key"</span>:<span class="string">"abusefilter-disallowed"</span>,<span class="attr">"params"</span>:[<span class="string">"移除所有分类（新用户）"</span>,<span class="number">28</span>]&#125;,<span class="attr">"abusefilter"</span>:&#123;<span class="attr">"id"</span>:<span class="number">28</span>,<span class="attr">"description"</span>:<span class="string">"移除所有分类（新用户）"</span>,<span class="attr">"actions"</span>:[<span class="string">"disallow"</span>]&#125;,<span class="attr">"info"</span>:<span class="string">"Hit AbuseFilter: 移除所有分类（新用户）"</span>,<span class="attr">"warning"</span>:<span class="string">"&lt;table...&gt;...&lt;/table&gt;\n"</span>,<span class="attr">"result"</span>:<span class="string">"Failure"</span>&#125;&#125;</div></pre></td></tr></table></figure><br><br>如果被垃圾过滤器阻止，那么会返回：<br><br><figure class="highlight json"><table><tr><td class="code"><pre><div class="line">&#123;<span class="attr">"edit"</span>:&#123;<span class="attr">"spamblacklist"</span>:<span class="string">"t.cn"</span>,<span class="attr">"result"</span>:<span class="string">"Failure"</span>&#125;&#125;</div></pre></td></tr></table></figure><br><br></div>

<h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><p>维基百科上面的<a href="https://zh.wikipedia.org/wiki/Help:%E6%A8%A1%E6%9D%BF" target="_blank" rel="external">Help:模板</a>和<a href="https://zh.wikipedia.org/wiki/Help:%E8%A7%A3%E6%9E%90%E5%99%A8%E5%87%BD%E6%95%B0" target="_blank" rel="external">Help:解析器函数</a>已经讲得很详细了。如果不想看长篇大论，下面是简化版：</p>
<p>&#123;&#123;&#123;1&#125;&#125;&#125;就是套用模板时的第一个参数，&#123;&#123;&#123;1&#124;默认值&#125;&#125;&#125;会指定一个默认值。假如模板叫Template:a，内容是“&#123;&#123;&#123;1&#125;&#125;&#125;，&#123;&#123;&#123;2&#124;默认值&#125;&#125;&#125;”，那么&#123;&#123;a&#125;&#125;会返回“，默认值”，&#123;&#123;a&#124;123&#124;456&#125;&#125;会返回“123，456”。</p>
<p>解析器函数包括expr、if、ifeq、ifexist、ifexpr、switch、time、language、babel、invoke等。大致用法如下：</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#123;&#123; #expr: 1+1 &#125;&#125;</td>
<td>2</td>
</tr>
<tr>
<td>&#123;&#123; #if: 字符串 &#124; 它是空白 &#124; 它不是空白 &#125;&#125;</td>
<td>它不是空白</td>
</tr>
<tr>
<td>&#123;&#123; #ifeq: 字符串 &#124; 字符串2 &#124; 相等 &#124; 不等 &#125;&#125;</td>
<td>不等</td>
</tr>
<tr>
<td>&#123;&#123; #ifexist: Wikipedia:首页 &#124; 存在 &#124; 不存在 &#125;&#125;</td>
<td>存在</td>
</tr>
<tr>
<td>&#123;&#123; #ifexpr: 1+1 &#124; 不等于0 &#124; 等于0 &#125;&#125;</td>
<td>不等于0</td>
</tr>
<tr>
<td>&#123;&#123; #switch: 3 &#124; 1=a &#124; 2=b &#124; 3=c &#124; #default=4 &#125;&#125;</td>
<td>c</td>
</tr>
<tr>
<td>&#123;&#123; #invoke:String &#124; replace &#124; abc &#124; a &#124; b &#125;&#125;</td>
<td>bbc</td>
</tr>
</tbody>
</table>
<p>其中invoke就要涉及lua编程了。</p>
<h1 id="lua"><a href="#lua" class="headerlink" title="lua"></a>lua</h1><p>如果模板非常复杂，那么可以改用lua脚本来生成。</p>
<p>MediaWiki上面有一个非常详细的<a href="https://www.mediawiki.org/wiki/Extension:Scribunto/Lua_reference_manual" target="_blank" rel="external">入门教程</a>，即使没学过lua也没关系。</p>
<p>在维基百科，lua脚本页面必须以“Module:”（“模块:”）开头。如果想建立测试页面，则需要以“Module:沙盒/Example/”开头。</p>
<p>在调试模块之前，可以找个沙盒页面把invoke写好，然后在编辑代码时预览那个页面。</p>
<h2 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h2><p>脚本需要返回一个table，所有对外公开的函数都需要放到那个table里。函数只有一个参数，frame，它是把&#123;&#123;#invoke:&#125;&#125;后面参数等信息包装好之后的东西。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><div class="line">f = &#123;&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f.fun</span><span class="params">(frame)</span></span></div><div class="line">    ...</div><div class="line">    <span class="comment">-- error('报错')</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'字符串'</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">return</span> f</div></pre></td></tr></table></figure>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>假如脚本位于<code>Module:沙盒/Example</code>，函数叫fun，维基文本是&#123;&#123;#invoke:沙盒/Example &#124; fun &#124; aaaaa &#124; info=bbbb&#125;&#125;，那么可以用以下方法获取参数：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><div class="line"><span class="keyword">local</span> text = frame.args[<span class="number">1</span>]</div><div class="line"><span class="keyword">local</span> info = frame.args.info</div></pre></td></tr></table></figure>
<p>获取某个页面的内容（注意，有些模板会被展开）：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><div class="line"><span class="keyword">local</span> content = mw.title.new(<span class="string">'Wikipedia:首页'</span>):getContent()</div></pre></td></tr></table></figure>
<p>使用别的模块：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><div class="line"><span class="keyword">local</span> f = <span class="built_in">require</span>(<span class="string">'Module:沙盒/Example/其他模块'</span>)</div><div class="line">f.fun()</div></pre></td></tr></table></figure>
<h1 id="GNU-LilyPond"><a href="#GNU-LilyPond" class="headerlink" title="GNU LilyPond"></a>GNU LilyPond</h1><p>只是稍微提个醒，如果闲得蛋疼，可以在维基百科里排个简单的钢琴谱，而且可以播放出来！详见<a href="https://zh.wikipedia.org/wiki/Help:%E4%B9%90%E8%B0%B1" target="_blank" rel="external">Help:乐谱</a>。</p>
<p>举个例子，<a href="https://zh.wikipedia.org/w/index.php?oldid=41405796" target="_blank" rel="external">和平大佬随手写的一段</a>。</p>
<p>注意不要侵权。</p>
<h1 id="机器人"><a href="#机器人" class="headerlink" title="机器人"></a>机器人</h1><p>详细内容可以见<a href="https://zh.wikipedia.org/wiki/Wikipedia:%E8%A3%BD%E4%BD%9C%E6%A9%9F%E5%99%A8%E4%BA%BA" target="_blank" rel="external">Wikipedia:制作机器人</a>。</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>前面JavaScript一节已经给出了机器人的基本原理——那段代码其实已经可以当作人工辅助机器人来用。</p>
<p>维基百科要求自动化程序必须使用自己的User-Agent，没有User-Agent或者伪装成浏览器（然后被发现）会导致500。</p>
<p>机器人在运行之前需要登录，而且访问API的脚本需要保存Cookie，否则无法保持登录状态。虽然可以用账号本身的密码进行登录，不过最安全的方法是通过OAuth。一般情况大家都用<a href="https://zh.wikipedia.org/wiki/Special:BotPasswords" target="_blank" rel="external">机器人密码</a>，因为OAuth还需要额外申请。</p>
<p>以使用<a href="https://github.com/request/request" target="_blank" rel="external">request</a>库的Node.js代码为例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">'request'</span>).defaults(&#123;<span class="attr">jar</span>: <span class="literal">true</span>&#125;);</div><div class="line">request.post(&#123;</div><div class="line">    <span class="attr">url</span>: url,</div><div class="line">    <span class="attr">headers</span>: &#123;</div><div class="line">        <span class="string">'User-Agent'</span>: USERAGENT</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">form</span>: &#123;</div><div class="line">        <span class="attr">action</span>: <span class="string">'query'</span>,</div><div class="line">        <span class="attr">meta</span>: <span class="string">'tokens'</span>,</div><div class="line">        <span class="attr">type</span>: <span class="string">'login'</span>,</div><div class="line">        <span class="attr">format</span>: <span class="string">'json'</span></div><div class="line">    &#125;</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error, response, body</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!error &amp;&amp; response.statusCode === <span class="number">200</span>) &#123;</div><div class="line">        <span class="keyword">var</span> token = <span class="built_in">JSON</span>.parse(body).query.tokens.logintoken;</div><div class="line"></div><div class="line">        request.post(&#123;</div><div class="line">            <span class="attr">url</span>: url,</div><div class="line">            <span class="attr">headers</span>: &#123;</div><div class="line">                <span class="string">'User-Agent'</span>: USERAGENT</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">form</span>: &#123;</div><div class="line">                <span class="attr">action</span>: <span class="string">'login'</span>,</div><div class="line">                <span class="attr">lgname</span>: <span class="string">'用户名'</span>,       <span class="comment">// 如果使用机器人密码，那么用户名中含有“@”号。</span></div><div class="line">                lgpassword: <span class="string">'密码'</span>,</div><div class="line">                <span class="attr">lgtoken</span>: token,</div><div class="line">                <span class="attr">format</span>: <span class="string">'json'</span></div><div class="line">            &#125;</div><div class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error, response, body</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!error &amp;&amp; response.statusCode === <span class="number">200</span>) &#123;</div><div class="line">                <span class="keyword">var</span> result = <span class="built_in">JSON</span>.parse(body).login.result;</div><div class="line">                <span class="keyword">if</span> (result === <span class="string">'Success'</span>) &#123;</div><div class="line">                    <span class="comment">// 登录成功</span></div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="comment">// 登录失败，例如用户不存在、密码错误等，详见</span></div><div class="line">                    <span class="comment">// https://www.mediawiki.org/wiki/API:Login#The_login_action</span></div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// 错误</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// 错误</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>有些机器人的作者公开了源代码，例如<a href="https://zh.wikipedia.org/wiki/User:Cewbot" target="_blank" rel="external">Cewbot</a>（Node.js）、<a href="https://zh.wikipedia.org/wiki/User:Antigng-bot" target="_blank" rel="external">Antigng-bot</a>（C语言orz）等，可以前去膜拜一下。另外，在Tools Lab上运行的机器人必须使用采用自由软件许可的项目。</p>
<h2 id="Tools-Lab"><a href="#Tools-Lab" class="headerlink" title="Tools Lab"></a>Tools Lab</h2><p>维基媒体基金会提供了一个免费空间，大家可以在上面进行架网站、跑机器人等活动，当然，得和维基媒体基金会的计划有关。只需要到<a href="https://wikitech.wikimedia.org/wiki/Main_Page" target="_blank" rel="external">Wikitech</a>注册一个账户，然后申请Tools权限。之后管理员审核通过后会赋予你shell权限。把自己的SSH公钥加入到Wikitech的系统设置中就可以通过ssh登录。</p>
<p>Tools Lab的规矩比较多（而且大伙儿都在同一个主机上面登录），所以在实际操作之前应该仔细阅读各项说明文件，以免意外翻车。</p>
<p>Lab各软件配置：</p>
<table>
<thead>
<tr>
<th>软件</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>系统</td>
<td>Ubuntu 14.04.4</td>
</tr>
<tr>
<td>Linux</td>
<td>3.13.0</td>
</tr>
<tr>
<td>Python</td>
<td>2.7.6 / 3.4.3</td>
</tr>
<tr>
<td>Ruby</td>
<td>1.9.3</td>
</tr>
<tr>
<td>PHP</td>
<td>5.5.9</td>
</tr>
<tr>
<td>Node.js</td>
<td>0.10.25</td>
</tr>
<tr>
<td>Perl</td>
<td>5.18.2</td>
</tr>
</tbody>
</table>
<p>用jsub（常驻型程序必须通过jsub运行）跑Node.js时记得给内存分大一点，否则肯定会挂。</p>
<p>不要以为Labs自带的Node.js版本很旧——维基大佬<a href="https://zh.wikipedia.org/wiki/User:Kanashimi" target="_blank" rel="external">Kanashimi</a>在<code>/shared/bin/node</code>放了一个最新版的node。</p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>维基百科不允许未经批准的机器人进行编辑（但是可以在不会对维基百科造成任何影响的地方例如沙盒进行测试），即使已有机器人权限也要严格按照申请进行，所以进行每一种正式编辑之前都要进行申请。</p>
<p>此外也可以到<a href="https://test2.wikipedia.org" target="_blank" rel="external">test2wiki</a>进行测试。</p>
<h1 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h1><h2 id="电脑高手们"><a href="#电脑高手们" class="headerlink" title="电脑高手们"></a>电脑高手们</h2><p>这个列表可能会持续更新：</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/User_talk:Liangent" target="_blank" rel="external">Liangent</a>：才女，Orz。（个人用户页被技术那边的人给整丢了）</li>
<li><a href="https://zh.wikipedia.org/wiki/User:Jimmy_Xu" target="_blank" rel="external">Jimmy Xu</a>：Orz</li>
<li><a href="https://zh.wikipedia.org/wiki/User:Antigng" target="_blank" rel="external">Antigng</a>：Orz</li>
<li><a href="https://zh.moegirl.org/User_talk:妹空酱" target="_blank" rel="external">妹空酱</a>/<a href="https://zh.wikipedia.org/wiki/User:镜音铃" target="_blank" rel="external">镜音铃</a>：Wikiplus作者，Orz</li>
<li><a href="https://zh.wikipedia.org/wiki/User:Kanashimi" target="_blank" rel="external">Kanashimi</a>：Orz</li>
<li>还有一堆潜水的大神们……Orz。</li>
</ul>
<p>详见<a href="https://zh.wikipedia.org/wiki/Special:%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8/bot" target="_blank" rel="external">机器人列表</a>。</p>
<h2 id="版权"><a href="#版权" class="headerlink" title="版权"></a>版权</h2><p>目前维基百科采用CC BY-SA 3.0（未来可能会改为4.0）和GFDL两个许可协议，因此不要粘GPL等协议的代码。</p>
<p>举个例子，Wikiplus是个实用的小工具，然而一方面作者本人认为工具还不够好，另一方面程序采用Apache协议授权，所以作者不应该往维基百科里面放，维基百科也不会接受。这种情况下，如果是JavaScript脚本，那么可以把代码放到别的地方，然后再通过mw.loader.load加载过来。</p>
<p>再举个例子，本博客采用CC BY-NC-SA 4.0许可，所以，尽管内容跟维基百科紧密相关，而且还是自己写的，就是不能直接粘过去。</p>
<h2 id="关于自动化修改和破坏"><a href="#关于自动化修改和破坏" class="headerlink" title="关于自动化修改和破坏"></a>关于自动化修改和破坏</h2><p>如果想对很多页面进行修改的话，可以申请自动维基浏览器使用权，也可以申请机器人，或者请求其他人用机器人进行修改。实施自动化或半自动化修改应当先申请或打招呼，保证自己的修改不会引发争议，否则容易招致封禁。</p>
<p>如果纯粹是想通过编程来破坏维基百科的话，建议不要这样做，因为破坏很快就能被恢复，而且自己会被管理员给收拾一顿（封禁）。真想搞破坏的话，应当做好充分的技术准备，制定周密的计划，然后再进行行动——像<a href="https://wiki.esu.moe/张祥如" target="_blank" rel="external">这位</a>或<a href="https://wiki.esu.moe/曹国祥" target="_blank" rel="external">这位</a>那样洗版是不行的。</p>
<p>如果不想引起任何争议的话，可以在自己电脑上架个MediaWiki，这样的话无论如何破坏和滥权都没问题（曹国铁路除外——只要架个网站就会迅速坠毁，回归虚无）。维基百科所使用的插件见<a href="https://zh.wikipedia.org/wiki/Special:%E7%89%88%E6%9C%AC" target="_blank" rel="external">Special:版本</a>。</p>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="https://vjudge1.github.io/2016/10/07/programming-in-wikipedia/" data-id="cj2pxeimx002c1tcm1sb40vo6" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="https://vjudge1.github.io/2016/10/07/programming-in-wikipedia/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
    </footer>
  </div>
  
</article>



  
    <article id="post-gae" class="article article-type-post" itemscope itemprop="blogPost">

  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/04/gae/">Google App Engine入门（Python）</a>
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
    <span class="article-date">
        <time datetime="2016-10-03T16:00:00.000Z" itemprop="datePublished">2016-10-04</time>
    </span>
</div>

    
    
    <div class="article-category">
        <a class="article-category-link" href="/categories/教程/">教程</a>
    </div>


    
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GAE/">GAE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>


  </div>
  
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>Google App Engine其实是一个非常不错的应用引擎，免费，不用处理审核备案之类的麻烦事，而且文档丰富，感觉上要比新浪SAE或百度BAE好多了。虽说以前用GAE只是为了<a href="https://zh.wikipedia.org/zh/GoAgent" target="_blank" rel="external">GoAgent</a>，而且GAE被墙了，但是它免费啊，而且自己可以自行翻墙啊，因此仍然可以拿它做一些个人专用的或者给老外用的应用。</p>
<p>GAE的文档很全，不过内容全是英语，对于我这种英语不好的来说简直就是在赎罪。此外GAE也是个巨坑，在探索过程中我也碰了不少灰，所以正好在本文总结一下坑点。</p>
<h1 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h1><p>为了免去很多不必要的麻烦，建议用Linux/Mac系统。我就用Mac了。</p>
<p>首先肯定要注册Google账号了。</p>
<div class="bs-callout bs-callout-danger">
                <h4 id="大坑注意"><a href="#大坑注意" class="headerlink" title="大坑注意"></a>大坑注意</h4><p>在墙内Google账号很有可能无法通过手机验证（换多少个电话都不好使），所以建议找海外的人帮忙注册，或者先搜一下“手机无法用于验证”，总结一下注意事项，然后做好失败的精神准备。</p>

            </div>
<p>然后得做一些最起码的事情，例如给自己系统装上Python（2.7）和Git，然后把代理配置好。我个人建议使用HTTP代理（我使用的是<a href="https://github.com/cyfdecyf/cow" target="_blank" rel="external">COW</a>），并且在终端中把<code>HTTP_PROXY</code>和<code>HTTPS_PROXY</code>设置好，免得麻烦。</p>
<p>接下来需要<a href="https://cloud.google.com/appengine/docs/python/download" target="_blank" rel="external">下载SDK</a>。SDK有两种，一种是旧的SDK（下载按钮下面的那个“Optionally, ……”），图形界面的，还有一种是新的SDK（蓝色的DOWNLOAD按钮），纯命令行的。两者都行，不过我用的是后者。</p>
<p>别被花钱的Google Cloud Platform吓到，其实App Engine和它是一起的。新建项目的时候瞅准点就行——我们用的是App Engine。如果你不小心搞了一个Cloud，花钱了，不要来找我。</p>
<p>点击蓝色的DOWNLOAD按钮，就会跳转到新SDK下载处。下载，把它扔到一个固定的位置（我的意思是，装完之后就是那个目录了，所以别放桌面上），<code>./install.sh</code>。如果放<code>/usr/local</code>一类的地方，别忘了sudo。</p>
{% callout info %}
#### 代理

如果不是通过环境变量设置的代理，那么需要对gcloud配置一下，例如：

    gcloud config set proxy/address 127.0.0.1
    gcloud config set proxy/port 1080
    gcloud config set proxy/type socks5
{% endcallout %}
<p>既然是Python，那么需要再安装一个本地调试用的扩展。输入</p>
<pre><code>gcloud components install app-engine-python
</code></pre><p>其他的话可以用<code>gcloud components list</code>来查看。</p>
<p>安装完成后，需要连接到自己的谷歌账号。输入<code>gcloud init</code>即可登录。</p>
<h1 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h1><p>GAE对Python的支持怎么说呢？大多数框架还是支持的，例如Django和Flask等等都可以直接跑。但是仍然有很多限制，例如：</p>
<ol>
<li>向本地写入文件的行为被禁止。</li>
<li>subprocesses被禁用。</li>
<li>多线程被禁止。</li>
<li>大多数基于C语言的模块被禁止。</li>
<li>系统调用被禁止。</li>
</ol>
<div class="bs-callout bs-callout-info">
                <h4 id="免费版限制"><a href="#免费版限制" class="headerlink" title="免费版限制"></a>免费版限制</h4><p>如果不花钱的话……</p>
<ol>
<li>socket模块无法使用。也就是说，凡是用到import socket的东西都会出错。</li>
<li>每天流量1GB，北京时间下午4点重置。urlfetch每分钟22M，传入传出带宽每分钟56M……所以GoAgent翻墙会有流量限制，而且这并不应当由GoAgent背锅。</li>
<li>详细的资源限制可以到GAE控制面板的“配额”哪里查看。</li>
</ol>

            </div>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>以最简单的基于Flask的Hello World为例。一个GAE项目基本上要有自己的程序、app.yaml、appengine_config.py、requirements.txt。</p>
<h3 id="hello-py"><a href="#hello-py" class="headerlink" title="hello.py"></a>hello.py</h3><figure class="highlight python"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> os</div><div class="line">sys.path.append(os.path.join(os.path.abspath(<span class="string">'.'</span>), <span class="string">'venv/Lib/site-packages'</span>))</div><div class="line"></div><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line"><span class="meta">@app.route('/')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'It doesn\'t work!'</span></div></pre></td></tr></table></figure>
<h3 id="app-yaml"><a href="#app-yaml" class="headerlink" title="app.yaml"></a>app.yaml</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line"><span class="attr">runtime:</span> <span class="string">python27</span></div><div class="line"><span class="attr">api_version:</span> <span class="number">1</span></div><div class="line"><span class="attr">threadsafe:</span> <span class="literal">yes</span></div><div class="line"><span class="attr">handlers:</span></div><div class="line"><span class="attr">- url:</span> <span class="string">.*</span></div><div class="line"><span class="attr">  script:</span> <span class="string">hello.app</span></div></pre></td></tr></table></figure>
<p>其中hello.app对应hello.py。以前需要写应用名和version，现在不需要，而且不能写。如果从别的地方复制的代码中含有application和version，现在可以删掉了。</p>
<p>handlers相当于路由表。静态文件可以（而且应当）直接处理，例如：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line"><span class="attr">- url:</span> <span class="string">/favicon\.ico</span></div><div class="line"><span class="attr">  static_files:</span> <span class="string">static/images/favicon.ico</span></div><div class="line"><span class="attr">  upload:</span> <span class="string">static/images/favicon\.ico</span></div></pre></td></tr></table></figure>
<p>有一些特殊的库因为很常用，所以不需要自行安装，例如ssl等。<a href="https://cloud.google.com/appengine/docs/python/tools/built-in-libraries-27" target="_blank" rel="external">这些库</a>可以在app.yaml中添加：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><div class="line"><span class="attr">libraries:</span></div><div class="line"><span class="attr">- name:</span> <span class="string">ssl</span></div><div class="line"><span class="attr">  version:</span> <span class="number">2.7</span></div></pre></td></tr></table></figure>
<h3 id="requirements-txt"><a href="#requirements-txt" class="headerlink" title="requirements.txt"></a>requirements.txt</h3><p>因为我们用到了flask，不是Python自带的，也不是GAE自带的，所以需要安装。在文件中输入：</p>
<pre><code>Flask&gt;=0.10.1
</code></pre><h3 id="appengine-config-py"><a href="#appengine-config-py" class="headerlink" title="appengine_config.py"></a>appengine_config.py</h3><p>通过该文件，我们可以告诉GAE在import的时候应该到哪里去找库。输入：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><div class="line"><span class="keyword">from</span> google.appengine.ext <span class="keyword">import</span> vendor</div><div class="line">vendor.add(<span class="string">'lib'</span>)</div></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>如果想跑定期运行的任务（cron），可以看<a href="https://cloud.google.com/appengine/docs/python/config/cron" target="_blank" rel="external">cron文档</a>。</p>
<h2 id="本地调试"><a href="#本地调试" class="headerlink" title="本地调试"></a>本地调试</h2><p>打开终端，进入项目所在目录。</p>
<p>把依赖库装上：</p>
<pre><code>pip install -t lib -r requirements.txt
</code></pre><div class="bs-callout bs-callout-warning">
                <h4 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h4><p>官方文档中指出基于Homebrew的Python可能会出问题。我用的MacPorts，而且直接把系统Python干掉了（要不然Vim插件ycmd无法加载），所以不知道是什么情况。</p>

            </div>
<p>输入以下命令即可运行：</p>
<pre><code>dev_appserver.py .
</code></pre><p>屏幕会提示<code>http://localhost:8080</code>，那就是调试用的网站了。网站遇到错误的时候终端直接就会有提示（所以我建议用终端版的SDK，看起来方便）。另外还有个8000是后台。</p>
{% callout warning %}
#### 坑

如果程序运行结果与预想结果不符的话，不妨试试`rm *.pyc`。刚开始的时候我就被pyc坑苦了。
{% endcallout %}
<p>实际上，以上命令在GAE的在线命令行里面敲同样是好使的。</p>
<h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>如果想让网站在GAE上正式跑起来，首先需要在GAE上开个代码库，然后通过gcloud命令部署。</p>
<h2 id="代码库"><a href="#代码库" class="headerlink" title="代码库"></a>代码库</h2><p>进到GAE网站，在左面的菜单中找到“开发”，点进去，可以看到“源代码”，Source Tools。GAE的代码库既可以从GitHub导入，也可以直接开一个。</p>
<p>开一个新代码库之后，GAE会告诉你如何上传代码。你可以选择把空仓库<code>git clone</code>到本地，也可以选择在本地<code>git init</code>然后再上传。</p>
<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>我选择在GAE建立一个新代码库，通过<code>git init</code>推过去。</p>
<p>首先得把当前目录变成Git仓库：</p>
<pre><code>git init
</code></pre><p>建立一个<code>.gitignore</code>，在其中输入<code>*.pyc</code>和<code>*/*.pyc</code>。没必要把这类文件加到仓库里面。</p>
<p>如果有lib目录的话，当然不要把lib目录扔了，否则程序没法运行。把代码上传到GitHub的时候应当把lib删掉，但是调试和部署的时候还是得把lib弄回来。</p>
<p>然后是git的一套：</p>
<pre><code>git add *
git commit -m &apos;First&apos;
</code></pre><p>接下来照敲GAE给你的命令：</p>
<pre><code>git config credential.helper gcloud.sh
git remote add google https://source.developers.google.com/...（换成你自己的地址）
git push --all google
</code></pre><p>前两条命令只需要敲一次。以后只需要把git的那一套弄好（add、rm、commit等等），直接push即可。</p>
<div class="bs-callout bs-callout-info">
                <h4 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h4><p>第一次会问你Google账号密码。如果你确定输入无误，但是上传失败，过一会儿再试就可以了。当然，别忘了代理。</p>

            </div>
<h2 id="部署-1"><a href="#部署-1" class="headerlink" title="部署"></a>部署</h2><p>部署很简单，在本地敲一行命令，然后在提示中敲“y”即可：</p>
<pre><code>gcloud app deploy
</code></pre><p>小项目的话等几分钟就可以完成部署。有的时候可能比较慢，实际上是因为正在建立Docker的映像……</p>
<h1 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h1><p>删除网站时，首先要进入App Engine界面，到设置中把它停止，然后再到Dashboard（不叫dashboard但是是这种Dashboard或Overview的意思）中找到它，删除。一开始我找了半天，后来发现，最好还是先手动停止一下，这样“删除”就比较好找了。删除动作不是马上进行的，GAE会给你一个期限，在此期间可以反悔。</p>
<h1 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h1><p>还有些东西没去折腾，以后有机会再填坑（不排除弃坑的可能）：</p>
<ol>
<li>GAE的数据库和Storage怎么折腾？</li>
<li>GAE新支持了Ruby和Node.js，怎么折腾？花不花钱？</li>
</ol>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="https://vjudge1.github.io/2016/10/04/gae/" data-id="cj2pxeimr00291tcmyy0o9gwk" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="https://vjudge1.github.io/2016/10/04/gae/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
    </footer>
  </div>
  
</article>



  


  <div id="page-nav">
    <nav><ul class="pagination"><li class="disabled"><span class="page-prev"><span aria-hidden="true">&laquo;</span> Prev</span></li><li class="active"><span class="page-number">1</span></li><li><a class="page-number" href="/page/2/">
        2
        </a></li><li><a class="page-number" href="/page/3/">
        3
        </a></li><li class="disabled"><span class="page-space">&hellip;</span></li><li><a class="page-number" href="/page/7/">
        7
        </a></li><li><a class="page-next" rel="next"
                href="/page/2/">Next <span aria-hidden="true">&raquo;</span></a></li></ul></nav>
  </div>



            </div>
            <div class="col-sm-3 blog-sidebar">
                
  
  <div class="sidebar-module">
    <h4><i class="fa fa-th-list"></i> Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/个人心得/">个人心得</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/其他/">其他</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/备忘录/">备忘录</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/折腾记录/">折腾记录</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/教程/">教程</a><span class="sidebar-module-list-count">13</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/经验总结/">经验总结</a><span class="sidebar-module-list-count">7</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4><i class="fa fa-archive"></i> Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/05/">五月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/11/">十一月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/10/">十月 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/08/">八月 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/04/">四月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/03/">三月 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/01/">一月 2016</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/12/">十二月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/11/">十一月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/09/">九月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/08/">八月 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/07/">七月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/05/">五月 2015</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/04/">四月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/02/">二月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2014/12/">十二月 2014</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2014/04/">四月 2014</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2014/02/">二月 2014</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2013/01/">一月 2013</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2012/08/">八月 2012</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4><i class="fa fa-newspaper-o"></i> Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2017/05/13/change-to-hexo/">换成 Hexo</a>
        </li>
      
        <li>
          <a href="/2016/11/08/move-to-archlinux/">换成Arch Linux系统的一些记录</a>
        </li>
      
        <li>
          <a href="/2016/10/08/macports/">MacPorts的安装与使用</a>
        </li>
      
        <li>
          <a href="/2016/10/07/programming-in-wikipedia/">维基百科编程笔记</a>
        </li>
      
        <li>
          <a href="/2016/10/04/gae/">Google App Engine入门（Python）</a>
        </li>
      
    </ul>
  </div>



  
  <div class="sidebar-module">
    <h4><i class="fa fa-tags"></i> Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/API/">API</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Atom/">Atom</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/C/">C</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/C/">C#</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/GAE/">GAE</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/GUI/">GUI</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hackintosh/">Hackintosh</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hexo/">Hexo</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Java/">Java</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/JavaScript/">JavaScript</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Jekyll/">Jekyll</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/LaTeX/">LaTeX</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Linux/">Linux</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Mac/">Mac</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/MacPorts/">MacPorts</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/NTFS/">NTFS</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Python/">Python</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/QQ/">QQ</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Rails/">Rails</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/UEFI/">UEFI</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/VPS/">VPS</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Visual-Studio/">Visual Studio</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Windows/">Windows</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/npm/">npm</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/wine/">wine</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/zsh/">zsh</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/中文/">中文</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/云/">云</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/单片机/">单片机</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/反汇编/">反汇编</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/平板/">平板</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/插件/">插件</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/教务系统/">教务系统</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/東方Project/">東方Project</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/电幕/">电幕</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/系统维护/">系统维护</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/维基百科/">维基百科</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/编程/">编程</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/语文/">语文</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/输入法/">输入法</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/配置/">配置</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>




            </div>
        </div>
    </div>
    <footer class="blog-footer">
    <div class="container">
        <ol class="footer-list">
            
                <li>
                    <a href="/about/">
                        关于
                    </a>
                </li>
            
                <li>
                    <a href="https://vjudge1.github.io/kuso/sos/">
                        让我帮你百度一下
                    </a>
                </li>
            
        </ol>
        <ol class="social-media-list">
            
                <li>
                    <a href="mailto:vjudge404@gmail.com" data-toggle="tooltip" data-placement="top" title="Email">
                        <i class="fa fa-envelope"></i>
                    </a>
                </li>
            
            
            <li>
                <a href="https://github.com/vjudge1" data-toggle="tooltip" data-placement="top" title="GitHub">
                    <i class="fa fa-github"></i>
                </a>
            </li>
            
            
            
            
        </ol>
        <br class="clear" />
        <div class="footnote">
            
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> by vjudge1
            
        </div>
    </div>
</footer>

    
<script>
    var disqus_shortname = 'vjudge1';
    
    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
