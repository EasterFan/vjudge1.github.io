<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>从C++转向C#的快速入门教程</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="从C++过渡到C#也能很快入门。">
<meta name="keywords" content="C#">
<meta property="og:type" content="article">
<meta property="og:title" content="从C++转向C#的快速入门教程">
<meta property="og:url" content="https://vjudge1.github.io/2016/04/02/cpp2cs/index.html">
<meta property="og:site_name" content="⑨rz">
<meta property="og:description" content="从C++过渡到C#也能很快入门。">
<meta property="og:updated_time" content="2017-05-15T18:39:37.616Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从C++转向C#的快速入门教程">
<meta name="twitter:description" content="从C++过渡到C#也能很快入门。">
  
    
    <link rel="alternate" href="/feed.xml" title="⑨rz" type="application/atom+xml">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>

<body>
    <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li class="">
            <a href="/index.html">Home</a>
          </li>
        
          <li class="">
            <a href="/archives/">Archives</a>
          </li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

    
    
    <div class="jumbotron">
        <div class="container">
            <h1 class="post-title" id="post-title">
                <a href="/" title="Back to home">
                    从C++转向C#的快速入门教程
                </a>
            </h1>
            <div class="article-meta">
                <div class="article-datetime">
    <span class="article-date">
        <time datetime="2016-04-01T16:00:00.000Z" itemprop="datePublished">2016-04-02</time>
    </span>
</div>

                
                
    <div class="article-category">
        <a class="article-category-link" href="/categories/教程/">教程</a>
    </div>


                
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li></ul>


            </div>
        </div>
    </div>


    <div class="container">
        <div class="row">
            <div class="col-sm-9 blog-main">
                <article id="post-cpp2cs" class="article article-type-post" itemscope itemprop="blogPost">

    

    <div class="article-inner">
        <div class="article-entry" itemprop="articleBody">
            
                <p>从C++过渡到C#也能很快入门。</p>
<a id="more"></a>
<p>只要你舍得你电脑C盘的空间，C#环境特别容易配置——Visual Studio。</p>
<p>如果你用的是Linux或Mac，你也可以通过装Mono来跑C#，然后拿Xamarin Studio（写安卓和iOS应用需要花钱，写本地应用不要钱）或Code（目前还没出正式版）写程序，只不过没有Windows Forms、ADO.NET以及那些乱七八糟的八百年都用不到的WPF什么的。</p>
<p>早在微软把.Net Core开源之前，就有一伙人（Mono）在模仿.Net。现在.Net开源了，所以也没什么太大区别了。</p>
<p>为了照顾Linux和Mac<span class="blackout">其实是偷懒</span>，本文直接省略Windows Forms内容——反正在这方面VB、C#、C++/CLI是一模一样的，随便捡一本书都通用<span class="blackout">其实我自己学过VB，所以还是偷懒</span>。</p>
<h1 id="Helloworld"><a href="#Helloworld" class="headerlink" title="Helloworld"></a>Helloworld</h1><p>在VS中新建“C#控制台工程”，然后在Program.cs中：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">Hello</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">class</span> <span class="title">MainClass</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(<span class="string">"Hello World!"</span>);</div><div class="line">            Console.ReadLine();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>为了防止控制台窗口一闪而过，你可能希望在最后加一行ReadLine()。后面都一样。</p>
<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><h2 id="命名习惯"><a href="#命名习惯" class="headerlink" title="命名习惯"></a>命名习惯</h2><p>和C++不一样，而且C#的命名习惯比较固定，直接Google一下就知道了。</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>C#将数据类型分为值类型和引用类型，大意就是当你用=赋值的时候，值类型就是在内存里开个新空间，然后把内容拷一份，而引用类型就相当于一个指针，不用Clone复制的话即使用一百个=赋值其实也只有一个实例。</p>
<p>值类型：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>.Net Framework中的名称</th>
<th>取值范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>sbyte</td>
<td>System.SByte</td>
<td>-128~127</td>
</tr>
<tr>
<td>byte</td>
<td>System.Byte</td>
<td>0~255</td>
</tr>
<tr>
<td>short</td>
<td>System.Int16</td>
<td>-32768~32767</td>
</tr>
<tr>
<td>ushort</td>
<td>System.UInt16</td>
<td>0~65535</td>
</tr>
<tr>
<td>int</td>
<td>System.Int32</td>
<td>有符号32位</td>
</tr>
<tr>
<td>uint</td>
<td>System.UInt32</td>
<td>无符号32位</td>
</tr>
<tr>
<td>long</td>
<td>System.Int64</td>
<td>有符号64位</td>
</tr>
<tr>
<td>ulong</td>
<td>System.UInt64</td>
<td>无符号64位</td>
</tr>
<tr>
<td>char</td>
<td>System.Char</td>
<td>无符号16位</td>
</tr>
<tr>
<td>float</td>
<td>System.Single</td>
<td>1.5e-45~3.4e38</td>
</tr>
<tr>
<td>double</td>
<td>System.Double</td>
<td>5.0e-324~1.7e308</td>
</tr>
<tr>
<td>decimal</td>
<td>System.Decimal</td>
<td>1.0e-28~7.9e28</td>
</tr>
<tr>
<td>bool</td>
<td>System.Boolean</td>
<td>true和false</td>
</tr>
</tbody>
</table>
<ul>
<li>枚举类型也是值类型。</li>
<li>这些类型定义出的变量和类型本身都是可以当成对象来用的。</li>
<li>引用类型：类、object（System.Object）、string（System.String）、数组、接口、委托等</li>
<li>引用类型的变量需要用new分配空间。</li>
</ul>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><p>和C语言一样，使用小括号进行类型转换。</p>
<p>或者使用as关键字进行转换（as必须是引用类型。转换失败不会引发异常）：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">object</span> o = <span class="number">10</span>;</div><div class="line">T t = o <span class="keyword">as</span> T;</div></pre></td></tr></table></figure>
<p>不过像文本与字符串之间的转换是不能靠小括号实现的。这时候要借助类库了：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</div><div class="line"><span class="keyword">string</span> b = <span class="string">"123"</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> b2 = <span class="keyword">int</span>.Parse(b);</div><div class="line"><span class="keyword">int</span> b3 = Convert.ToInt32(b);</div><div class="line"><span class="keyword">string</span> a2 = a.ToString();</div><div class="line"><span class="keyword">string</span> a3 = Convert.ToString(a);</div></pre></td></tr></table></figure>
<p>不过这些转换如果失败那是要引发异常的。</p>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><p>函数参数默认情况下是值类型按值传递，引用类型按引用传递。</p>
<p>不过值类型的传递方式是可以改的，例如：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">HelloCS</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">class</span> <span class="title">MainClass</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun1</span>(<span class="params"><span class="keyword">ref</span> <span class="keyword">int</span> i</span>) </span>&#123;</div><div class="line">            i = <span class="number">10</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun2</span>(<span class="params"><span class="keyword">out</span> <span class="keyword">int</span> i</span>) </span>&#123;</div><div class="line">            i = <span class="number">20</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">int</span> a = <span class="number">1</span>;</div><div class="line">            fun1(<span class="keyword">ref</span> a);        <span class="comment">// 不能丢掉ref</span></div><div class="line">            System.Console.WriteLine(a);</div><div class="line">            fun2(<span class="keyword">out</span> a);        <span class="comment">// 不能丢掉out</span></div><div class="line">            System.Console.WriteLine(a);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ref（引用参数）相当于引用，out（输出参数）也差不多。</p>
<p>此外还有一个params，可接受任意个参数，相当于C++里的“…”。它必须是最后一个参数，且为一维数组。</p>
<h2 id="指针和引用"><a href="#指针和引用" class="headerlink" title="指针和引用"></a>指针和引用</h2><p>C#没有指针和引用。不过在函数参数中可以用类似的东西——ref。</p>
<p>成员访问没有“-&gt;”，只有“.”运算符。</p>
<h2 id="控制结构"><a href="#控制结构" class="headerlink" title="控制结构"></a>控制结构</h2><p>和C++一样，不过if和while的括号里的东西得是严格的bool类型。</p>
<p>foreach语句：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">foreach</span> (<span class="keyword">int</span> a <span class="keyword">in</span> b)</div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>C#的switch语句中，至少要有一个跳出switch结构的语句，例如goto、throw、return、break。</p>
<h2 id="using"><a href="#using" class="headerlink" title="using"></a>using</h2><p>using语句块用于获取一个或多个资源，语句块结束之后释放。对象需要实现IDisposable接口。</p>
<p>例如：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">class</span> <span class="title">A</span> : <span class="title">IDisposable</span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        Console.WriteLine(<span class="string">"Hello"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">void</span> IDisposable.Dispose()</div><div class="line">    &#123;</div><div class="line">        Console.WriteLine(<span class="string">"释放资源"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">...</div><div class="line"><span class="keyword">using</span> (A a = <span class="keyword">new</span> A())</div><div class="line">&#123;</div><div class="line">    a.fun();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p>语法和C++略有区别——权限修饰符要跟上：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">A</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> n;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span>(<span class="params"><span class="keyword">int</span> <span class="keyword">value</span></span>)</span></div><div class="line">    &#123;</div><div class="line">        n = <span class="keyword">value</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span>(<span class="params"></span>)</span></div><div class="line">    &#123;</div><div class="line">        n = <span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>挂上sealed关键字可防止被继承。</p>
<h2 id="构造函数和析构函数"><a href="#构造函数和析构函数" class="headerlink" title="构造函数和析构函数"></a>构造函数和析构函数</h2><p>和C++差不多。</p>
<ul>
<li>不要写复制构造函数——去实现ICloneable接口吧！</li>
<li>构造函数可以挂static。这样的话在第一次碰到这个类的时候会执行。</li>
</ul>
<h2 id="成员"><a href="#成员" class="headerlink" title="成员"></a>成员</h2><h3 id="字段"><a href="#字段" class="headerlink" title="字段"></a>字段</h3><p>可使用static、readonly等修饰。</p>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">10</span>;</div></pre></td></tr></table></figure>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>static、virtual是相同的。</p>
<p>列出几个和C++不同的地方：</p>
<ul>
<li>用virtual声明为虚方法（在C++里叫虚函数），重写虚方法时要写上override关键字。</li>
<li>用sealed override防止被重写。</li>
<li>用abstract表示抽象方法（相当于C++的纯虚函数）。这种类在定义时，class前面也要跟abstract关键字。</li>
</ul>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>属性是一个比较特殊的东西，它可以让setter和getter形式变得很简单——想想Java是怎样写的就知道了……</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">string</span> Name</div><div class="line">&#123;</div><div class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> name; &#125;</div><div class="line">    <span class="keyword">set</span> &#123; name = <span class="keyword">value</span>; &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>假设这个类有个实例叫做a，那么赋值直接就是<code>a.Name = &quot;xxx&quot;;</code>，取值则是<code>a.Name</code>。</p>
<h3 id="索引器"><a href="#索引器" class="headerlink" title="索引器"></a>索引器</h3><p>就是可以用“[]”来访问——</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">string</span> <span class="keyword">this</span>[<span class="keyword">int</span> index]</div><div class="line">&#123;</div><div class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> ...; &#125;</div><div class="line">    <span class="keyword">set</span> &#123; ... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>见后面的“委托”。</p>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>C#可以重载运算符。以下是与C++的不同之处：</p>
<ul>
<li>运算符必须为public static成员。</li>
<li>不能重载各种赋值、&amp;&amp;、||、new。</li>
<li>不能重载[]，但是可以定义索引器——也算是重载了吧。</li>
<li>比较运算符必须成对重载：==和!=、&lt;和&gt;、&lt;=和&gt;=。重载其中一个的话必须同时重载另一个。</li>
<li>重载类型转换运算符时要挂上explicit（要求强制转换）或implicit（可以隐式转换）关键字。</li>
</ul>
<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><p>namespace定义命名空间，using引用。</p>
<p>using可定义别名，例如</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> WF = System.Forms;</div></pre></td></tr></table></figure>
<h2 id="分部类型"><a href="#分部类型" class="headerlink" title="分部类型"></a>分部类型</h2><p>一个类的内容可以被分割到多个文件当中——只要都挂上partial关键字就行了。编译时它们的内容会自动被合并到一起。</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><ul>
<li>C#的继承也是用冒号表示。</li>
<li>C#不支持多继承，也不支持挂private、protected什么的。</li>
<li>在实例化子类时，基类的构造函数会被自动调用。</li>
<li>用base表示基类。</li>
<li>如果直接覆盖基类的某个成员，需要加new关键字。要么就用虚函数。</li>
</ul>
<h2 id="虚函数"><a href="#虚函数" class="headerlink" title="虚函数"></a>虚函数</h2><p>和C++差不多，不过在子类实现时要加override关键字。</p>
<p>C++的纯虚函数在C#里叫做抽象方法，用abstract关键字修饰。</p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p>C#也有struct，不过功能弱化很多。</p>
<p>结构是值类型（内存分配在堆栈上，而且使用时不需要new），不支持无参数的构造函数，不能继承，但可以实现接口。</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>如果一个类里面全是抽象函数，那么这个类也可以定义成接口。例如：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">Testable</span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Test</span>(<span class="params"></span>)</span>;</div><div class="line">    <span class="function"><span class="keyword">string</span> <span class="title">Result</span>(<span class="params"></span>)</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接口支持多继承。</p>
<h2 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h2><p>委托有点像C++里的函数指针，但还有些区别——委托是一个类。</p>
<h3 id="定义和使用委托"><a href="#定义和使用委托" class="headerlink" title="定义和使用委托"></a>定义和使用委托</h3><p>简单例子：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication1</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">delegate</span> <span class="keyword">int</span> <span class="title">MyDelegate</span>(<span class="params"><span class="keyword">int</span> i</span>)</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Fun</span>(<span class="params"><span class="keyword">int</span> i</span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> i * <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            MyDelegate d1 = <span class="keyword">new</span> MyDelegate(Program.Fun);</div><div class="line">            <span class="keyword">int</span> r = d1(<span class="number">20</span>);</div><div class="line">            Console.WriteLine(r);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="方法列表"><a href="#方法列表" class="headerlink" title="方法列表"></a>方法列表</h3><p>委托可以使用+和-运算符。这样通过一个委托就可以依次执行多个方法。例如：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication1</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">delegate</span> <span class="keyword">void</span> <span class="title">MyDelegate</span>(<span class="params"></span>)</span>;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">F1</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(<span class="string">"F1"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">F2</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(<span class="string">"F2"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            MyDelegate d1 = <span class="keyword">new</span> MyDelegate(Program.F1);</div><div class="line">            MyDelegate d2 = <span class="keyword">new</span> MyDelegate(Program.F2);</div><div class="line">            MyDelegate d3 = d1 + d2;</div><div class="line">            d3();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="事件-1"><a href="#事件-1" class="headerlink" title="事件"></a>事件</h3><p>类似观察者模式，但是“事件”在语法上使其变得简单很多——用不着定义一堆复杂的类。</p>
<p>事件通过委托实现。</p>
<p>示例：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication1</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">class</span> <span class="title">EventTest</span></div><div class="line">    &#123;</div><div class="line">        <span class="comment">// 声明事件</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">event</span> EventHandler Change;</div><div class="line"></div><div class="line">        <span class="keyword">private</span> <span class="keyword">int</span> n;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">int</span> N</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> n; &#125;</div><div class="line">            <span class="keyword">set</span></div><div class="line">            &#123;</div><div class="line">                n = <span class="keyword">value</span>;</div><div class="line">                <span class="comment">// 调用事件</span></div><div class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.Change != <span class="literal">null</span>)</div><div class="line">                &#123;</div><div class="line">                    Change(<span class="keyword">this</span>, <span class="literal">null</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">A_Change</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></div><div class="line">        &#123;</div><div class="line">            Console.WriteLine(<span class="string">"N被改变"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            EventTest a = <span class="keyword">new</span> EventTest();</div><div class="line">            <span class="comment">// 注册事件</span></div><div class="line">            a.Change += A_Change;</div><div class="line"></div><div class="line">            <span class="comment">// 改变N时会触发事件</span></div><div class="line">            a.N = <span class="number">5</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 移除事件</span></div><div class="line">            a.Change -= A_Change;</div><div class="line"></div><div class="line">            <span class="comment">// 没有提示</span></div><div class="line">            a.N = <span class="number">6</span>;</div><div class="line"></div><div class="line">            Console.ReadLine();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>类似C++的模板，不过在C#里不能扔非类型形参。</p>
<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><figure class="highlight"><table><tr><td class="code"><pre><div class="line">public class A&lt;T&gt;</div><div class="line">&#123;</div><div class="line">    private T n;</div><div class="line">    public T Fun()</div><div class="line">    &#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h3><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> fun&lt;T&gt;(T a)</div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line">...</div><div class="line">x.fun&lt;<span class="keyword">int</span>&gt;(<span class="number">12</span>);</div></pre></td></tr></table></figure>
<p>泛型方法也支持abstract、virtual、override和委托。</p>
<h3 id="类型形参的约束"><a href="#类型形参的约束" class="headerlink" title="类型形参的约束"></a>类型形参的约束</h3><figure class="highlight"><table><tr><td class="code"><pre><div class="line">public class A&lt;T&gt; where T : struct</div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>常用的约束有：</p>
<ul>
<li>struct：必须是值类型（但不是Nullable）</li>
<li>class：必须是引用类型</li>
<li>new()：必须有无参数的构造函数</li>
<li>基类名称：必须是这个基类或者其派生类。</li>
<li>接口名称：必须实现指定的接口。</li>
<li>T：假如为<code>A&lt;T1, T2&gt; where T2 : T1</code>，那么T2的类型必须是T1或由T1派生。</li>
</ul>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h2><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>[] arr;</div><div class="line"><span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</div><div class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>&#125;;</div></pre></td></tr></table></figure>
<p>若不初始化，则元素初值为其类型默认值。</p>
<p>遍历：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;arr.length; i++)</div><div class="line">&#123;</div><div class="line">    System.Console.WriteLine(arr[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">foreach</span> (<span class="keyword">int</span> i <span class="keyword">in</span> arr)</div><div class="line">&#123;</div><div class="line">    System.Console.WriteLine(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h2><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>[,] arr;</div><div class="line"><span class="keyword">int</span>[,] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>,<span class="number">3</span>];</div></pre></td></tr></table></figure>
<h2 id="交错数组"><a href="#交错数组" class="headerlink" title="交错数组"></a>交错数组</h2><p>交错数组即数组的数组。</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][];</div></pre></td></tr></table></figure>
<h2 id="System-Array"><a href="#System-Array" class="headerlink" title="System.Array"></a>System.Array</h2><p>数组的实质是Array类实例。</p>
<p>该类有一个属性Length可获取数组长度。此外该类还有若干静态方法：BinarySearch()、Clear()、Clone()、ConstrainedCopy()、Copy()、FindIndex()、FindLastIndex()、GetUpperBound()、Reverse()、Sort()等。</p>
<h2 id="System-ArrayList"><a href="#System-ArrayList" class="headerlink" title="System.ArrayList"></a>System.ArrayList</h2><p>ArrayList是动态数组。通过其Add()、Insert()、Remove()、RemoveAt()、RemoveRange()等方法进行操作。</p>
<h1 id="语法糖"><a href="#语法糖" class="headerlink" title="语法糖"></a>语法糖</h1><p>语法糖就是对语言功能没什么影响，但写起来会方便一些的东西。</p>
<h2 id="可空类型"><a href="#可空类型" class="headerlink" title="可空类型"></a>可空类型</h2><p>可空类型就是可以赋值为null的类型。本质是System.Nullable<t>。</t></p>
<p>定义一个可空类型的变量有两种方法：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line">System.Nullable&lt;<span class="keyword">int</span>&gt; a;</div><div class="line"><span class="keyword">int</span>? b;</div></pre></td></tr></table></figure>
<p>获取可空类型的值：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>? a = <span class="number">0</span>;</div><div class="line"><span class="keyword">int</span> b;</div><div class="line"></div><div class="line"><span class="comment">// 方法一</span></div><div class="line"><span class="keyword">if</span> (a.HasValue)</div><div class="line">&#123;</div><div class="line">    b = a.Value;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 方法二</span></div><div class="line">b = a.GetValueOrDefault(<span class="number">10</span>);</div></pre></td></tr></table></figure>
<p>bool?类型的真值表（bool?不能使用&amp;&amp;、||）：</p>
<table>
<thead>
<tr>
<th>x</th>
<th>y</th>
<th>x &amp; y</th>
<th>x \</th>
<th>y</th>
</tr>
</thead>
<tbody>
<tr>
<td>true</td>
<td>null</td>
<td>null</td>
<td>true</td>
</tr>
<tr>
<td>false</td>
<td>null</td>
<td>false</td>
<td>null</td>
</tr>
<tr>
<td>null</td>
<td>null</td>
<td>null</td>
<td>null</td>
</tr>
</tbody>
</table>
<p>如果a为null，那么!a的结果仍是null。</p>
<h2 id="匿名类型"><a href="#匿名类型" class="headerlink" title="匿名类型"></a>匿名类型</h2><p>var语句可以自动推断类型，例如</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> n = <span class="number">10</span>;         <span class="comment">// int</span></div><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</div></pre></td></tr></table></figure>
<p>通过var可以定义匿名类型：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> stu = <span class="keyword">new</span> &#123; ID = <span class="number">1</span>, Name = <span class="string">"Alice"</span> &#125;;</div><div class="line">Console.WriteLine(stu.ID);</div></pre></td></tr></table></figure>
<p>如果不同匿名类型的属性相同，属性的顺序也相同，则会被视为同一类型。</p>
<h2 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h2><p>Lambda表达式是一种方便书写的匿名函数，也属于委托。例如：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">delegate</span> <span class="keyword">int</span> <span class="title">D</span>(<span class="params"><span class="keyword">int</span> m</span>)</span>;</div><div class="line">...</div><div class="line">D fun = (m) =&gt; m * m;</div><div class="line"><span class="keyword">int</span> a = fun(<span class="number">3</span>);</div></pre></td></tr></table></figure>
<p>通常不需要在Lambda表达式里指定参数类型。如果编译器难以推断，也可手动指定。</p>
<p>如果表达式中有多条语句，用花括号{}包一下就好。</p>
<p>如果一个函数的参数要求是委托、Expression类型或Func类型，那么也可传入Lambda表达式，例如统计偶数个数（需要<code>using System.Linq</code>）：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>[] arr = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</div><div class="line">Console.WriteLine(arr.Count((x) =&gt; x % <span class="number">2</span> == <span class="number">0</span>));</div></pre></td></tr></table></figure>
<h2 id="匿名方法"><a href="#匿名方法" class="headerlink" title="匿名方法"></a>匿名方法</h2><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line">button.Click += <span class="keyword">delegate</span>(<span class="keyword">object</span> sender, EventArgs e)</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(<span class="string">"这是匿名方法"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>匿名方法也可以作为参数来传递。</p>
<h2 id="查询表达式"><a href="#查询表达式" class="headerlink" title="查询表达式"></a>查询表达式</h2><p>LINQ查询表达式允许像SQL语句一样操作一个集合（实现IEnumerable接口就行）。</p>
<p>举几个例子感受一下：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>[] arr = &#123;<span class="number">12</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">11</span>&#125;;</div><div class="line"><span class="comment">// 挑出大于等于10的数</span></div><div class="line"><span class="keyword">var</span> query1 = <span class="keyword">from</span> n <span class="keyword">in</span> arr <span class="keyword">where</span> n &gt;= <span class="number">10</span> <span class="keyword">select</span> n;</div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> query1)</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(i);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 挑出其中的大于4的数，按照奇偶性分成两组，并降序排列</span></div><div class="line"><span class="keyword">var</span> query2 =</div><div class="line">    <span class="keyword">from</span> n <span class="keyword">in</span> arr</div><div class="line">    <span class="keyword">let</span> isOdd = (n % <span class="number">2</span> == <span class="number">1</span>)</div><div class="line">    <span class="keyword">where</span> n &gt; <span class="number">4</span></div><div class="line">    <span class="keyword">orderby</span> n <span class="keyword">descending</span></div><div class="line">    <span class="keyword">group</span> n <span class="keyword">by</span> isOdd;</div><div class="line"></div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> a <span class="keyword">in</span> query2)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> a)</div><div class="line">    &#123;</div><div class="line">        Console.WriteLine(i);</div><div class="line">    &#125;</div><div class="line">    Console.WriteLine();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有一个用来联接两个数据源的join子句：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">int</span>[] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</div><div class="line"><span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span> &#125;;</div><div class="line"></div><div class="line"><span class="comment">// 内部联接</span></div><div class="line"><span class="keyword">var</span> query = <span class="keyword">from</span> a <span class="keyword">in</span> arr1</div><div class="line">            <span class="keyword">join</span> b <span class="keyword">in</span> arr2 <span class="keyword">on</span> a <span class="keyword">equals</span> b</div><div class="line">            <span class="keyword">select</span> a;</div><div class="line"></div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> n <span class="keyword">in</span> query)</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(n);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 分组联接</span></div><div class="line"><span class="keyword">var</span> query2 = <span class="keyword">from</span> a <span class="keyword">in</span> arr1</div><div class="line">             <span class="keyword">join</span> b <span class="keyword">in</span> arr2 <span class="keyword">on</span> a <span class="keyword">equals</span> b <span class="keyword">into</span> g</div><div class="line">             <span class="keyword">select</span> <span class="keyword">new</span></div><div class="line">             &#123;</div><div class="line">                 A = a,</div><div class="line">                 B = g</div><div class="line">             &#125;;</div><div class="line"></div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> query2)</div><div class="line">&#123;</div><div class="line">    Console.Write(<span class="string">"&#123;0&#125;: "</span>, item.A);</div><div class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> item.B)</div><div class="line">    &#123;</div><div class="line">        Console.Write(<span class="string">"&#123;0&#125; "</span>, i);</div><div class="line">    &#125;</div><div class="line">    Console.WriteLine();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 左外部联接</span></div><div class="line"><span class="keyword">var</span> query3 = <span class="keyword">from</span> a <span class="keyword">in</span> arr1</div><div class="line">             <span class="keyword">join</span> b <span class="keyword">in</span> arr2 <span class="keyword">on</span> a <span class="keyword">equals</span> b <span class="keyword">into</span> g</div><div class="line">             <span class="keyword">from</span> ab <span class="keyword">in</span> g.DefaultIfEmpty()</div><div class="line">             <span class="keyword">select</span> ab;</div><div class="line"></div><div class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> n <span class="keyword">in</span> query3)</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(n);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>别忘了<code>using System.Linq;</code></p>
<h1 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h1><p>捕获异常：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">try</span></div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (Exception ex)</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(ex.Message);</div><div class="line">&#125;</div><div class="line"><span class="keyword">finally</span></div><div class="line">&#123;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>自定义异常应当继承System.Exception类。</p>
<p>抛出异常同样是throw语句。</p>
<h1 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h1><h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><p>String是不变字符串。String有很多属性和方法：</p>
<ul>
<li>Chars属性</li>
<li>Length属性</li>
<li>Insert()：插入字符串。返回值为处理之后的字符串，下同。</li>
<li>Remove()</li>
<li>Replace()</li>
<li>Concat()</li>
<li>static Join()</li>
<li>Split()：返回值是数组</li>
<li>PadLeft()/PadRight()</li>
<li>IndexOf()</li>
<li>Substring()</li>
<li>static Format()：格式化字符串。使用的是<code>{0}</code>一类的格式。</li>
</ul>
<h2 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h2><p>StringBuilder类似于C++的stringstream，适合频繁修改的字符串。</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line">StringBuilder strb = <span class="keyword">new</span> StringBuilder();</div><div class="line">strb.Append(<span class="string">"Hello"</span>);</div><div class="line">strb.Append(<span class="string">"World"</span>);</div><div class="line">Console.WriteLine(strb);</div></pre></td></tr></table></figure>
<p>StringBuilder也有一些属性和方法：</p>
<ul>
<li>Length属性</li>
<li>Capacity属性</li>
<li>MaxCapacity属性</li>
<li>Chars属性</li>
<li>Insert()</li>
<li>Append()</li>
<li>Remove()</li>
<li>Replace()</li>
<li>CopyTo()</li>
</ul>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 简单测试</span></div><div class="line">Console.WriteLine(Regex.IsMatch(<span class="string">"Helloworld"</span>, <span class="string">@"\w+"</span>));</div><div class="line"></div><div class="line"><span class="comment">// 匹配和提取</span></div><div class="line">MatchCollection mc = Regex.Matches(<span class="string">"a=0\nb=1"</span>, <span class="string">@"(\w+)=(.+?)"</span>);</div><div class="line"><span class="keyword">foreach</span> (Match m <span class="keyword">in</span> mc)</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(<span class="string">"&#123;0&#125;: &#123;1&#125;"</span>, m.Groups[<span class="number">1</span>], m.Groups[<span class="number">2</span>]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 替换</span></div><div class="line"><span class="keyword">string</span> r1 = Regex.Replace(<span class="string">"The code is 12345"</span>, <span class="string">"[a-z]"</span>, <span class="string">""</span>);</div><div class="line"><span class="comment">// 小写字母统统变成十六进制ASCII码</span></div><div class="line"><span class="keyword">string</span> r2 = Regex.Replace(<span class="string">"The code is 12345"</span>, <span class="string">"[a-z]"</span>,</div><div class="line">    (Match match) =&gt; Convert.ToString(Convert.ToChar(match.Value), <span class="number">16</span>));</div><div class="line">Console.WriteLine(r1);</div><div class="line">Console.WriteLine(r2);</div></pre></td></tr></table></figure>
<p>既可以使用Regex的静态函数，也可将其实例化。</p>
<p>最后别忘了</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System.Text.RegularExpressions;</div></pre></td></tr></table></figure>
<h1 id="日期-时间"><a href="#日期-时间" class="headerlink" title="日期/时间"></a>日期/时间</h1><p>日期时间（时刻）可以用DateTime结构表示，时间间隔用TimeSpan结构表示。</p>
<p>DateTime和TimeSpan有很多属性和方法，可以获取和设置各个细节、追加时间。因为VS的智能感知很强大<span class="blackout">明明是偷懒</span>，这里就不列举了。</p>
<p>获取当前时间：<code>DateTime.Now</code>和<code>DateTime.UtcNow</code></p>
<h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h1><p>首先，</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div></pre></td></tr></table></figure>
<h2 id="容器-1"><a href="#容器-1" class="headerlink" title="容器"></a>容器</h2><p>这些容器都不是线程安全的。</p>
<ul>
<li>List</li>
<li>LinkedList</li>
<li>Stack</li>
<li>Queue</li>
<li>SortedSet</li>
<li>SortedList</li>
<li>SortedDictionary</li>
<li>HashSet</li>
<li>Dictionary</li>
</ul>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>如果想让一个类可以通过foreach进行迭代，则需要实现IEnumerable接口，实现GetEnumerator()方法，然后用yield return语句送值（yield break表示迭代中止）。如果是泛型类，把泛型加上就行。</p>
<p>示例：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line"><span class="keyword">using</span> System;</div><div class="line"><span class="keyword">using</span> System.Collections;</div><div class="line"><span class="keyword">using</span> System.Collections.Generic;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication1</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">class</span> <span class="title">Fib</span> : <span class="title">IEnumerable</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> IEnumerator <span class="title">GetEnumerator</span>(<span class="params"></span>)</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">1</span>, z;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</div><div class="line">            &#123;</div><div class="line">                z = x + y;</div><div class="line">                x = y;</div><div class="line">                y = z;</div><div class="line">                <span class="keyword">yield</span> <span class="keyword">return</span> y;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">class</span> <span class="title">Program</span></div><div class="line">    &#123;</div><div class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></div><div class="line">        &#123;</div><div class="line">            Fib fib = <span class="keyword">new</span> Fib();</div><div class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> fib)</div><div class="line">            &#123;</div><div class="line">                Console.WriteLine(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果使用IEnumerator：</p>
<figure class="highlight cs"><table><tr><td class="code"><pre><div class="line">IEnumerator ie = fib.GetEnumerator();</div><div class="line"><span class="keyword">while</span> (ie.MoveNext())</div><div class="line">&#123;</div><div class="line">    Console.WriteLine(ie.Current);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>刚GetEnumerator()时，指针指在第一个元素的前面（Current为null）。用Reset()可以恢复到这个位置。</p>
<h1 id="I-O"><a href="#I-O" class="headerlink" title="I/O"></a>I/O</h1><h2 id="流"><a href="#流" class="headerlink" title="流"></a>流</h2><p>主要有FileStream、MemoryStream和BufferedStream。</p>
<p>这些类既支持读取又支持写入，既支持同步又支持异步。用智能感知就知道那些方法叫什么名字了<span class="blackout">又偷懒</span>。</p>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>主要集中在File类中，基本上都是静态方法。</p>
<p>FileInfo可以获取文件信息，同时也能操作文件。读写时通过FileInfo创建实例，打开文件，然后用FileStream操作就行了。</p>
<p>类似地，Directory和DirectoryInfo类就是操作目录的。</p>

            
        </div>

        
            

        

        <footer class="article-footer">
            <a data-url="https://vjudge1.github.io/2016/04/02/cpp2cs/" data-id="cj2qap19b0022wkcmp70p2nat" class="article-share-link">
                <i class="fa fa-share"></i> Share
            </a>
            
                <a href="https://vjudge1.github.io/2016/04/02/cpp2cs/#disqus_thread" class="article-comment-link">
                    <i class="fa fa-comment"></i> Comments
                </a>
            
        </footer>
    </div>
    
        
    <table id="article-nav">
        
            <tr role="presentation">
                <th>Newer post</th>
                <td>
                    <a href="/2016/08/12/touhou-cheater/" id="article-nav-newer" class="article-nav-link-wrap">
                        <span class="article-nav-link-title">自己动手写東方Project作弊器（一）</span>
                    </a>
                </td>
            </tr>
        
        
            <tr role="presentation">
                <th>Older post</th>
                <td>
                    <a href="/2016/03/31/cpp2java/" id="article-nav-older" class="article-nav-link-wrap">

                        <span class="article-nav-link-title">从C++转向Java的快速入门教程</span>
                    </a>
                </td>
            </tr>
        
    </table>


    
</article>


<section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>


<script src="/js/anchor.min.js"></script>
<script type="text/javascript">
// Anchor.js
if (anchors) {
    anchors.options.placement="left";
    anchors.add('.article-entry h1,h2,h3,h4');
}
</script>

            </div>
            <div class="col-sm-3 blog-sidebar">
                
    
  <div class="sidebar-module">
    <h4><i class="fa fa-th-list"></i> Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/个人心得/">个人心得</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/其他/">其他</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/备忘录/">备忘录</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/折腾记录/">折腾记录</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/教程/">教程</a><span class="sidebar-module-list-count">11</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/经验总结/">经验总结</a><span class="sidebar-module-list-count">7</span></li></ul>
  </div>



    
  <div class="sidebar-module">
    <h4><i class="fa fa-archive"></i> Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/05/">五月 2017</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/11/">十一月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/10/">十月 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/08/">八月 2016</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/04/">四月 2016</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/03/">三月 2016</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2016/01/">一月 2016</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/12/">十二月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/11/">十一月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/09/">九月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/08/">八月 2015</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/07/">七月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/05/">五月 2015</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/04/">四月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2015/02/">二月 2015</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2014/12/">十二月 2014</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2014/04/">四月 2014</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2014/02/">二月 2014</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2013/01/">一月 2013</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2012/08/">八月 2012</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>



    
  <div class="sidebar-module">
    <h4><i class="fa fa-send-o"></i> Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2017/05/13/change-to-hexo/">换成 Hexo</a>
        </li>
      
        <li>
          <a href="/2016/11/08/move-to-archlinux/">换成Arch Linux系统的一些记录</a>
        </li>
      
        <li>
          <a href="/2016/10/08/macports/">MacPorts的安装与使用</a>
        </li>
      
        <li>
          <a href="/2016/10/07/programming-in-wikipedia/">维基百科编程笔记</a>
        </li>
      
        <li>
          <a href="/2016/10/04/gae/">Google App Engine入门（Python）</a>
        </li>
      
    </ul>
  </div>



    
  <div class="sidebar-module">
    <h4><i class="fa fa-tags"></i> Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/API/">API</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Atom/">Atom</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/C/">C</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/C/">C#</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/GAE/">GAE</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/GUI/">GUI</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hackintosh/">Hackintosh</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Hexo/">Hexo</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Java/">Java</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/JavaScript/">JavaScript</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Jekyll/">Jekyll</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/LaTeX/">LaTeX</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Linux/">Linux</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Mac/">Mac</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/MacPorts/">MacPorts</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/NTFS/">NTFS</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Python/">Python</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/QQ/">QQ</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Rails/">Rails</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/UEFI/">UEFI</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/VPS/">VPS</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Visual-Studio/">Visual Studio</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/Windows/">Windows</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/npm/">npm</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/wine/">wine</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/zsh/">zsh</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/中文/">中文</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/云/">云</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/单片机/">单片机</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/反汇编/">反汇编</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/平板/">平板</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/插件/">插件</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/教务系统/">教务系统</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/東方Project/">東方Project</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/电幕/">电幕</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/系统维护/">系统维护</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/维基百科/">维基百科</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/编程/">编程</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/语文/">语文</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/输入法/">输入法</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/配置/">配置</a><span class="sidebar-module-list-count">1</span></li></ul>
  </div>




            </div>
        </div>
    </div>
    <footer class="blog-footer">
    <div class="container">
        <ol class="footer-list">
            
                <li>
                    <a href="/about/">
                        关于
                    </a>
                </li>
            
                <li>
                    <a href="https://vjudge1.github.io/kuso/sos/">
                        让我帮你百度一下
                    </a>
                </li>
            
        </ol>
        <ol class="social-media-list">
            
                <li>
                    <a href="mailto:vjudge404@gmail.com" data-toggle="tooltip" data-placement="top" title="Email">
                        <i class="fa fa-envelope"></i>
                    </a>
                </li>
            
            
            <li>
                <a href="https://github.com/vjudge1" data-toggle="tooltip" data-placement="top" title="GitHub">
                    <i class="fa fa-github"></i>
                </a>
            </li>
            
            
            
            
        </ol>
        <br class="clear" />
        <div class="footnote">
            
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> by vjudge1
            
        </div>
    </div>
</footer>

    <div id="back-to-top" data-toggle="tooltip" data-placement="left" title="Back to top">
    <a href="javascript:;" title="Back to top">
        <div class="arrow"></div>
        <div class="stick"></div>
    </a>
</div>

    
<script>
    var disqus_shortname = 'vjudge1';
    
        var disqus_url = 'https://vjudge1.github.io/2016/04/02/cpp2cs/';
    
    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>
<script src="/js/back-to-top.js"></script>

</body>
</html>
